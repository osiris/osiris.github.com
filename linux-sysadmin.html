<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<title>Administrador de Sistemas GNU/Linux</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Osiris Alejandro Gómez" />
<link rel="stylesheet" href="osiux.css" type="text/css" />
<link rel="stylesheet" href="print.css" type="text/css" media="print" />
</head>
<body>
<div id="content">
<h1 class="title">Administrador de Sistemas GNU/Linux</h1>
<div id="table-of-contents">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Filosofía UNIX</a></li>
<li><a href="#sec-2">Linux por dentro, jerarquías de directorios</a></li>
<li><a href="#sec-3">Todo es un archivo, conociendo <code>/proc</code> y <code>/dev</code></a>
<ul>
<li><a href="#sec-3-1"><code>/proc</code></a>
<ul>
<li><a href="#sec-3-1-1"><code>/proc/partitions</code></a></li>
<li><a href="#sec-3-1-2"><code>/proc/uptime</code></a></li>
</ul>
</li>
<li><a href="#sec-3-2"><code>/dev</code></a>
<ul>
<li><a href="#sec-3-2-1"><code>/dev/null</code></a></li>
<li><a href="#sec-3-2-2"><code>/dev/sdX</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-4">Entrada estándar, Salida estándar y Tuberías</a>
<ul>
<li><a href="#sec-4-1">Descriptores de archivos</a></li>
<li><a href="#sec-4-2">Enviar la salida estándar a un archivo</a></li>
<li><a href="#sec-4-3">Enviar la salida de errores a un archivo</a></li>
<li><a href="#sec-4-4">Enviar la salida estándar y la salida de errores a un mismo archivo</a></li>
<li><a href="#sec-4-5">Enviar la salida de errores a la salida estándar</a></li>
<li><a href="#sec-4-6">Enviar la salida de estándar a <code>/dev/null</code></a></li>
<li><a href="#sec-4-7">Enviar la salida de estándar y la salida de errores a <code>/dev/null</code></a></li>
<li><a href="#sec-4-8">Enviar un archivo a la entrada estándar</a></li>
<li><a href="#sec-4-9">Enviar la salida estándar a un archivo y a la salida estándar</a></li>
<li><a href="#sec-4-10">Enviar la salida estándar de un comando como la entrada estándar de otro comando</a></li>
<li><a href="#sec-4-11"><code>stdout</code></a></li>
<li><a href="#sec-4-12"><code>stderr</code></a></li>
<li><a href="#sec-4-13">pipes</a></li>
</ul>
</li>
<li><a href="#sec-5">Comandos básicos de terminal</a>
<ul>
<li><a href="#sec-5-1">Directorios:</a>
<ul>
<li><a href="#sec-5-1-1">Moviéndose en el sistema de archivos:</a>
<ul>
<li><a href="#sec-5-1-1-1"><code>pwd</code></a></li>
<li><a href="#sec-5-1-1-2"><code>cd</code></a></li>
<li><a href="#sec-5-1-1-3"><code>cd /etc/php5</code></a></li>
<li><a href="#sec-5-1-1-4"><code>cd apache2</code></a></li>
<li><a href="#sec-5-1-1-5"><code>cd ..</code></a></li>
<li><a href="#sec-5-1-1-6"><code>cd $HOME</code></a></li>
<li><a href="#sec-5-1-1-7"><code>cd ~osiris</code></a></li>
</ul>
</li>
<li><a href="#sec-5-1-2">Listar directorios:</a>
<ul>
<li><a href="#sec-5-1-2-1"><code>ls -l</code></a></li>
<li><a href="#sec-5-1-2-2"><code>ls</code></a></li>
<li><a href="#sec-5-1-2-3"><code>ls -a</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-5-2">Cambiando permisos y atributos</a>
<ul>
<li><a href="#sec-5-2-1"><code>chmod 750 archivo</code></a></li>
<li><a href="#sec-5-2-2"><code>chgrp grupo archivo</code></a></li>
<li><a href="#sec-5-2-3"><code>chown usuario archivo</code></a></li>
<li><a href="#sec-5-2-4"><code>chown usuario archivo</code></a></li>
</ul>
</li>
<li><a href="#sec-5-3">Moviendo, renombrando y copiando archivos:o</a></li>
<li><a href="#sec-5-4">Ver y editar arhivos:</a>
<ul>
<li><a href="#sec-5-4-1"><code>cat</code></a></li>
<li><a href="#sec-5-4-2"><code>head</code></a></li>
<li><a href="#sec-5-4-3"><code>head -2</code></a></li>
<li><a href="#sec-5-4-4"><code>tail</code></a></li>
<li><a href="#sec-5-4-5"><code>sed</code></a></li>
</ul>
</li>
<li><a href="#sec-5-5">Expresiones regulares</a>
<ul>
<li><a href="#sec-5-5-1"><code>[a-z]</code> Minúsculas</a></li>
<li><a href="#sec-5-5-2"><code>[A-Z]</code> Mayúsculas</a></li>
<li><a href="#sec-5-5-3"><code>[0-9]</code> Números</a></li>
<li><a href="#sec-5-5-4"><code>[^..]</code> Patrón distinto</a></li>
<li><a href="#sec-5-5-5"><code>^</code> comienzo de línea</a></li>
<li><a href="#sec-5-5-6"><code>$</code> fin de línea</a></li>
<li><a href="#sec-5-5-7"><code>.</code> cualquier carácter</a></li>
<li><a href="#sec-5-5-8"><code>?</code> cero o una aparición</a></li>
<li><a href="#sec-5-5-9"><code>*</code> ninguna o muchas repeticiones</a></li>
<li><a href="#sec-5-5-10"><code>+</code> una o más repeticiones</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-6">Acceso remoto usando ssh</a>
<ul>
<li><a href="#sec-6-1">¿qué ventajas tiene?</a></li>
<li><a href="#sec-6-2">¿qué necesito para usar SSH?</a></li>
<li><a href="#sec-6-3">¿cómo me conecto por SSH?</a></li>
<li><a href="#sec-6-4">¿qué sucede la primera vez?</a></li>
<li><a href="#sec-6-5">Listo, entré a la matrix! ¿y ahora?</a></li>
<li><a href="#sec-6-6">El intruso va por la revancha!</a></li>
<li><a href="#sec-6-7">Eliminando al intruso!</a></li>
<li><a href="#sec-6-8">El intruso es duro de domar!</a></li>
<li><a href="#sec-6-9">¿Y ahora quién podrá defendernos?</a></li>
<li><a href="#sec-6-10">Controlando la matrix!</a></li>
</ul>
</li>
<li><a href="#sec-7">Entornos gráficos, ejecución remota de aplicaciones gráficas</a>
<ul>
<li><a href="#sec-7-1"><code>ssh -X</code></a></li>
<li><a href="#sec-7-2"><code>DISPLAY\</code>:0=</a></li>
<li><a href="#sec-7-3"><code>vnc4server</code></a></li>
</ul>
</li>
<li><a href="#sec-8">Procesos</a>
<ul>
<li><a href="#sec-8-1">¿Qué es proceso?</a></li>
<li><a href="#sec-8-2">¿Por qué?</a></li>
<li><a href="#sec-8-3">Lo que el usuario ve:</a></li>
<li><a href="#sec-8-4">Lo que el sistema ve:</a></li>
<li><a href="#sec-8-5"><code>PID</code></a></li>
<li><a href="#sec-8-6">Listar procesos</a></li>
<li><a href="#sec-8-7">Operaciones</a></li>
<li><a href="#sec-8-8">Jerarquía</a></li>
<li><a href="#sec-8-9">En tiempo real</a></li>
<li><a href="#sec-8-10">Resumen</a></li>
<li><a href="#sec-8-11">Changelog</a></li>
</ul>
</li>
<li><a href="#sec-9">Automatizando tareas: <code>sleep</code>, <code>jobs</code>, <code>crontab</code></a>
<ul>
<li><a href="#sec-9-1">Procesos padres e hijos</a></li>
<li><a href="#sec-9-2">Para mí, vos estás en segundo plano</a></li>
<li><a href="#sec-9-3">Sos tan lento&#x2026; que no te quiero ver</a></li>
<li><a href="#sec-9-4">Esta compu, se destruye en 5 minutos!</a></li>
<li><a href="#sec-9-5">Tengo un crontab para no olvidar nada</a></li>
<li><a href="#sec-9-6">Robotizando el mouse</a></li>
</ul>
</li>
<li><a href="#sec-10">Análisis de tráfico de red con <code>tcpdump</code> y <code>wireshark</code></a>
<ul>
<li><a href="#sec-10-1">la era de la inocencia</a></li>
<li><a href="#sec-10-2">olfateando la red</a></li>
<li><a href="#sec-10-3">mirando en profundidad</a></li>
<li><a href="#sec-10-4">y si chateamos?</a></li>
<li><a href="#sec-10-5">el fin de la privacidad?</a></li>
<li><a href="#sec-10-6">por las dudas yo guardo el tráfico de red ;-)</a></li>
<li><a href="#sec-10-7">no entendí nada! :-(</a></li>
</ul>
</li>
<li><a href="#sec-11">Introducción a las redes TCP/IP</a>
<ul>
<li><a href="#sec-11-1">Topología, redes y Subredes</a></li>
<li><a href="#sec-11-2">Asignación de IPs por medio de DHCP</a>
<ul>
<li><a href="#sec-11-2-1">Red de 4 equipos</a></li>
<li><a href="#sec-11-2-2"><code>B</code> dice, <b>necesito una IP!</b></a></li>
<li><a href="#sec-11-2-3"><code>D</code> dice, <b>yo te puedo dar IP!</b></a></li>
<li><a href="#sec-11-2-4"><code>B</code> dice, confirmo recepción!</a></li>
<li><a href="#sec-11-2-5"><code>D</code> dice, confirmo confirmación!</a></li>
</ul>
</li>
<li><a href="#sec-11-3">Resolución de nombres de dominios DNS</a>
<ul>
<li><a href="#sec-11-3-1">viendo un paquete de query dns</a></li>
<li><a href="#sec-11-3-2">analizando un paquete de query dns</a></li>
<li><a href="#sec-11-3-3">capturar consultas al dns</a></li>
<li><a href="#sec-11-3-4">ranking de dns</a></li>
</ul>
</li>
<li><a href="#sec-11-4">Sniffers nmap, dsniff</a>
<ul>
<li><a href="#sec-11-4-1">nmap</a></li>
</ul>
</li>
<li><a href="#sec-11-5">Túneles y Redes Privadas Virtuales VPN</a>
<ul>
<li><a href="#sec-11-5-1">Redireccionar puertos con <code>ssh</code></a></li>
<li><a href="#sec-11-5-2">Proxy Socks mediante ssh</a></li>
<li><a href="#sec-11-5-3">Tunel reverso con ssh</a></li>
</ul>
</li>
<li><a href="#sec-11-6">Cómo saber la IP de un equipo?</a>
<ul>
<li><a href="#sec-11-6-1">B dice, <b>cuál es la IP de D?</b></a></li>
<li><a href="#sec-11-6-2">D contesta, <b>mi IP es 10.4.14.225</b></a></li>
<li><a href="#sec-11-6-3">Quénes están en esta red?</a></li>
<li><a href="#sec-11-6-4">pingueando</a></li>
<li><a href="#sec-11-6-5">capturando pings</a></li>
<li><a href="#sec-11-6-6">viendo un <code>ping</code></a></li>
</ul>
</li>
<li><a href="#sec-11-7">traceroute</a></li>
<li><a href="#sec-11-8">protocolos</a>
<ul>
<li><a href="#sec-11-8-1">Qué tiene un paquete TCP/IP?</a></li>
<li><a href="#sec-11-8-2">Ethernet header</a></li>
</ul>
</li>
<li><a href="#sec-11-9">IP header</a></li>
<li><a href="#sec-11-10">UPD header</a></li>
<li><a href="#sec-11-11">TCP header</a></li>
<li><a href="#sec-11-12">ChangeLog</a></li>
</ul>
</li>
<li><a href="#sec-12">Configuración de servicios básicos</a>
<ul>
<li><a href="#sec-12-1">Apache</a>
<ul>
<li><a href="#sec-12-1-1">Instalar Apache</a></li>
<li><a href="#sec-12-1-2">Crear un VirtualHost</a></li>
<li><a href="#sec-12-1-3">Iniciar, Detener y Reiniciar Apache</a></li>
</ul>
</li>
<li><a href="#sec-12-2">PHP</a>
<ul>
<li><a href="#sec-12-2-1">Instalar PHP</a></li>
<li><a href="#sec-12-2-2">Configurar PHP</a></li>
<li><a href="#sec-12-2-3">Programar PHP</a></li>
</ul>
</li>
<li><a href="#sec-12-3">MySQL</a>
<ul>
<li><a href="#sec-12-3-1">Crear Base y Usuario</a></li>
<li><a href="#sec-12-3-2">UTF8</a></li>
<li><a href="#sec-12-3-3">MySQL de Bash</a></li>
<li><a href="#sec-12-3-4">MySQL desde Vim</a></li>
<li><a href="#sec-12-3-5">Reemplazar Texto</a>
<ul>
<li><a href="#sec-12-3-5-1">Traducir valores</a></li>
<li><a href="#sec-12-3-5-2">Actualizar registros</a></li>
</ul>
</li>
<li><a href="#sec-12-3-6">Buscar duplicados</a></li>
<li><a href="#sec-12-3-7">Agrupar</a></li>
<li><a href="#sec-12-3-8">Cruzando tablas</a></li>
<li><a href="#sec-12-3-9">Insertar desde otra tabla</a></li>
<li><a href="#sec-12-3-10">AUTOCOMPLETE</a></li>
<li><a href="#sec-12-3-11">COUNT</a></li>
<li><a href="#sec-12-3-12">EXPLAIN</a></li>
<li><a href="#sec-12-3-13">INDEX</a></li>
<li><a href="#sec-12-3-14">UNIQUE</a></li>
<li><a href="#sec-12-3-15">AUTO_INCREMENT</a></li>
<li><a href="#sec-12-3-16">REGEXP</a></li>
<li><a href="#sec-12-3-17">RANDOM</a></li>
</ul>
</li>
<li><a href="#sec-12-4">Postfix</a></li>
<li><a href="#sec-12-5">DHCP</a>
<ul>
<li><a href="#sec-12-5-1"><code>dhcp3</code></a>
<ul>
<li><a href="#sec-12-5-1-1">configuración</a></li>
<li><a href="#sec-12-5-1-2">iniciar y detener el servicio</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-13">Metodologías ágiles de trabajo</a>
<ul>
<li><a href="#sec-13-1">Time Management for System Administrators</a></li>
<li><a href="#sec-13-2">GTD</a>
<ul>
<li><a href="#sec-13-2-1">Workflow</a></li>
<li><a href="#sec-13-2-2">Recopilar</a></li>
<li><a href="#sec-13-2-3">Procesar</a></li>
<li><a href="#sec-13-2-4">Organizar</a></li>
<li><a href="#sec-13-2-5">Revisar</a></li>
</ul>
</li>
<li><a href="#sec-13-3">Scrum</a></li>
<li><a href="#sec-13-4">Pomodoro</a></li>
<li><a href="#sec-13-5">Autofocus</a></li>
<li><a href="#sec-13-6">Kanban</a></li>
</ul>
</li>
<li><a href="#sec-14">Aplicaciones de Consola</a>
<ul>
<li><a href="#sec-14-1">chat</a></li>
<li><a href="#sec-14-2">copias</a></li>
<li><a href="#sec-14-3">correo</a></li>
<li><a href="#sec-14-4">descargas</a></li>
<li><a href="#sec-14-5">disco</a></li>
<li><a href="#sec-14-6">editores</a></li>
<li><a href="#sec-14-7">explorador de archivos</a></li>
<li><a href="#sec-14-8">monitoreo</a>
<ul>
<li><a href="#sec-14-8-1"><code>top</code></a></li>
<li><a href="#sec-14-8-2"><code>atop</code></a></li>
<li><a href="#sec-14-8-3"><code>htop</code></a></li>
<li><a href="#sec-14-8-4"><code>iftop</code></a></li>
<li><a href="#sec-14-8-5"><code>iotop</code></a></li>
<li><a href="#sec-14-8-6"><code>ioping</code></a></li>
<li><a href="#sec-14-8-7">mon</a></li>
<li><a href="#sec-14-8-8">monit</a></li>
<li><a href="#sec-14-8-9">munin</a></li>
<li><a href="#sec-14-8-10"><code>mtr</code></a></li>
<li><a href="#sec-14-8-11">sysstat</a></li>
<li><a href="#sec-14-8-12"><code>vnstat</code></a>
<ul>
<li><a href="#sec-14-8-12-1">top 10</a></li>
<li><a href="#sec-14-8-12-2">vista mensual</a></li>
<li><a href="#sec-14-8-12-3">vista semanal</a></li>
<li><a href="#sec-14-8-12-4">vista por horas</a></li>
</ul>
</li>
<li><a href="#sec-14-8-13">multitail</a></li>
<li><a href="#sec-14-8-14">logcheck</a></li>
</ul>
</li>
<li><a href="#sec-14-9">musica</a></li>
<li><a href="#sec-14-10">navegadores web</a></li>
<li><a href="#sec-14-11">red</a></li>
<li><a href="#sec-14-12">rss</a></li>
<li><a href="#sec-14-13">seguridad</a></li>
<li><a href="#sec-14-14">utilitarios</a></li>
<li><a href="#sec-14-15">versionado</a></li>
<li><a href="#sec-14-16">ssh</a>
<ul>
<li><a href="#sec-14-16-1"><code>parallel-ssh</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
<a href="index.html">index</a> | <a href="osiux.html">OSiUX</a> | <a href="blog.html">blog</a> | <a href="docs.html">docs</a> | <a href="charlas.html">charlas</a>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Filosofía UNIX</h2>
<div class="outline-text-2" id="text-1">
<p>
<i>UNIX</i> incorpora un conjunto de herramientas que guardan cierta
analogía con una navaja multiusos. Son simples, pero hacen muy bien
su trabajo. En lugar de construir programas muy complejos, <i>UNIX</i>
proporcionaba muchas pequeñas herramientas, y un esquema para poder
combinarlas de forma efectiva. Este diseño escala muy bien,
permitiendo al sistema crecer, incorporar nuevas herramientas y, a la
vez, ser compatible hacia atrás.
</p>

<p>
Los objetivos con que se creó determinaron una <i>filosofía</i> de <i>UNIX</i>
caracterizada por:
</p>

<ul class="org-ul">
<li>comandos cortos, simples, específicos y muy eficientes, que "hacen
una sola cosa pero la hacen muy bien".
</li>

<li>entrada y salida estandarizadas que permiten la interconexión de
comandos. Esto se llama entubamiento (<i>pipelining</i>): la salida de
un comando es tomada por el siguiente como entrada.
</li>
</ul>

<p>
Algunas directivas son:
</p>

<ul class="org-ul">
<li>Escribe programas que hagan una sola cosa y la hagan bien: esto
quiere decir que los programas deben de ser lo más atómicos posible
y que se compruebe mucho su rendimiento y funcionamiento para
hacerlo lo mejor posible.
</li>

<li>Escribe programas que trabajen juntos: de nada sirve escribir
programas que sirvan para una tarea específica y que, después,
cuando esa tarea se modifique de cierta forma, haya que reescribir
todo el programa.
</li>

<li>Es mejor dividir el problema en varios programas y después desechar
o reescribir solo uno de esos pequeños programas, cuando se
necesite, o incluso hacer nuevos.
</li>

<li>Escribe programas que manejen flujos de texto, pues esa es la
interfaz universal: todo lo que se hace con entrada y salida en
formato textual es más fácil de enlazar con otros programas, así
como reutilizarla en el pasado, presente y futuro.
</li>
</ul>

<p>
En estos conceptos se basa la mayoría del software libre existente,
por lo que servidores como <code>sendmail</code> o <code>postfix</code>, están diseñados en
pequeños servidores y/o programas que hacen partes de todo un proceso
y, mediante sus ficheros de configuración, se pueden enlazar de una u
otra forma, así como usar otros programas y/o servidores en lugar de
los que vienen por defecto y, así, extender su funcionalidad.
</p>

<p>
Sobre <i>filosofía Unix</i>, de una forma más extensa, <i>Mike Gancarz</i>,
escribe las siguientes líneas:
</p>

<ul class="org-ul">
<li>Lo pequeño es hermoso.
</li>
<li>Haz que cada programa haga una sola cosa, pero que la haga bien.
</li>
<li>Construye un prototipo lo antes posible.
</li>
<li>Elige portabilidad sobre eficiencia.
</li>
<li>Guarda los datos en archivos de texto plano.
</li>
<li>Aprovecha funcionalidades del software.
</li>
<li>Usa <i>scripts</i> de <i>shell</i> para aumentar la funcionalidad y portabilidad.
</li>
<li>Evita interfaces de usuario captivas.
</li>
<li>Haz de cada programa un filtro.
</li>
</ul>

<p>
La <i>filosofía UNIX</i> supone crear programas rápidos, simples, con poca
intervención por parte del usuario, o en caso de necesitarla, esta se
produzca al principio o lo más mínima posible. Esta se acopla
perfectamente a las necesidades de computación de los laboratorios
científicos, puesto que <i>Unix</i> fue originalmente desarrollado en uno de
estos.
</p>

<p>
A continuación algunas premisas:
</p>

<ul class="org-ul">
<li>Que cada programa realice únicamente la tarea para la que fue
creado y la haga bien.
</li>
<li>Para llevar a cabo una nueva tarea escribe un programa nuevo. No
compliques uno viejo añadiendo nueva funcionalidad.
</li>
<li>Escribe tu programa teniendo en cuenta que su salida probablemente
sea la entrada de otro programa.
</li>
<li>Guarda los datos en archivos de texto plano. Si necesitas
seguridad, confía en los permisos.
</li>
<li>Usa nombres cortos y en minúscula.
</li>
<li>En la manera de lo posible haz que el usuario suministre los datos
por línea de comandos en la llamada.
</li>
<li>Haz partes simples conectadas mediante interfaces limpias y bien
definidas.
</li>
<li>Céntrate en los datos.
</li>
<li>Claridad mejor que complejidad. La solución más simple es
frecuentemente la mejor.
</li>
<li>Portabilidad mejor que eficiencia.
</li>
<li>Piensa en paralelo. Hay otros procesos en el mundo, incluso
instancias de tu mismo programa funcionando al mismo tiempo.
</li>
<li>Hacer programas grandes, solo cuando se demuestre que no se puede
realizar con uno pequeño.
</li>
<li>Si no hay nada interesante que decir, que el programa mejor no diga
nada.
</li>
<li>Para cada problema existen múltiples soluciones.
</li>
<li>Diseña pensando en el futuro (esta cercano). Esto nos ofrece
compatibilidad y mayor tiempo de utilización.
</li>
<li>Programa de abajo hacia arriba y de conocimiento pragmático.
</li>
<li>Programa basado en el conocimiento Empírico o Experiencia.
</li>
<li>No se encuentra en los métodos y las normas oficiales, sino en el
medio-reflexivo implícito, el conocimiento.
</li>
</ul>

<p>
En resumidas cuentas la <i>filosofía Unix</i> se puede describir como bien
lo dice <i>Doug Mcllroy</i>:
</p>

<p>
"Escribe programas que hagan una cosa y la hagan bien, que trabajen
en armonía con otros y que manejen flujos de texto, pues esta es una
interfaz universal." - <i>Doug Mcllroy</i>
</p>

<p>
"Aquellos que no pueden entender UNIX, están condenados a
reinventarlo, pobremente." - <i>Henry Spencer</i>, 1987
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Linux por dentro, jerarquías de directorios</h2>
<div class="outline-text-2" id="text-2">
<pre class="example">
/
+-- bin         binarios
+-- boot        inicio del sistema, imágenes del kernel
+-- dev         dispositivos, presentes y futuros
+-- etc         configuraciones
+-- home        directorios personales de los usuarios
+-- lib         bibliotecas
+-- lost+found  archivos y/o cadenas perdidas
+-- media       dispositivos extraerles
+-- mnt         dispositivos montados
+-- opt         binarios fuera de la distro
+-- proc        procesos en ejecución
+-- root        directorio personal del /root/
+-- run         archivos de procesos en ejecución
+-- sbin        binarios del sistema
+-- selinux     secure linux
+-- srv         servicios ej: ftp
+-- sys         system
+-- tmp         temporales
+-- usr         archivos compartidos
+-- var         archivos que varían de tamaño, ej: logs
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Todo es un archivo, conociendo <code>/proc</code> y <code>/dev</code></h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><code>/proc</code></h3>
<div class="outline-text-3" id="text-3-1">
<p>
Es un pseudo-sistema de ficheros que se usa como interfaz para las
estructuras de datos del núcleo en lugar de leer e interpretar
/dev/kmem. La mayor parte de este sistema de ficheros es de sólo
lectura, pero algunos ficheros permiten cambiar variables del
núcleo.
</p>
</div>

<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><code>/proc/partitions</code></h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
Podemos ver las particiones que leyó el <i>kernel</i>:
</p>

<div class="org-src-container">

<pre class="src src-sh">cat /proc/partitions
</pre>
</div>

<pre class="example">
major minor  #blocks  name

   8        0  488386584 sda
   8        1   52428800 sda1
   8        2   52428800 sda2
   8        3  383527960 sda3
  11        0    1048575 sr0
 254        0  383525912 dm-0
 254        1   15630336 dm-1
   8       32    7823360 sdc
   8       33    7819328 sdc1
   8       48    7823360 sdd
   8       49    7819328 sdd1
</pre>
</div>
</div>

<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2"><code>/proc/uptime</code></h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
El <code>uptime</code> de nuestro equipo puede ser consultado directamente en
<code>/proc/uptime</code>,
</p>

<div class="org-src-container">

<pre class="src src-sh">cat /proc/uptime
</pre>
</div>

<pre class="example">
725257.02 1106262.29
</pre>

<p>
Si utilizamos el comando <code>uptime</code>, éste lee el valor expresado en
<b>epoc</b> (segundos que pasaron desde el 01/01/1970) y nos informa
hace cuántos días y horas nuestro servidor está prendido, además
de informar otros valores, como la cantidad de usuarios y el
<b>average</b>:
</p>

<div class="org-src-container">

<pre class="src src-sh">uptime
</pre>
</div>

<pre class="example">
18:39:55 up 8 days,  9:27,  9 users,  load average: 0,19, 0,28, 0,61
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><code>/dev</code></h3>
<div class="outline-text-3" id="text-3-2">
<p>
Aquí se encuentran todos los dispositivos del sistema, presentes y
futuros.
</p>
</div>

<div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><code>/dev/null</code></h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Este dispositivo es muy especial y sumamente útil, es un agujero
negro, todo lo que se envía a <code>/dev/null</code> desaparece
</p>

<div class="org-src-container">

<pre class="src src-sh">ls -lh /dev/null
</pre>
</div>

<pre class="example">
crw-rw-rw- 1 root root 1, 3 ago  4 09:12 /dev/null
</pre>

<p>
Si enviamos algo y luego miramos con un <code>ls</code> no vemos que se
incremente el tamaño del archivo:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #729fcf;">echo</span> <span style="color: #ad7fa8; font-style: italic;">"hola"</span> &gt;/dev/null
ls -lh /dev/null
</pre>
</div>

<pre class="example">
crw-rw-rw- 1 root root 1, 3 ago  4 09:12 /dev/null
</pre>
</div>
</div>

<div id="outline-container-sec-3-2-2" class="outline-4">
<h4 id="sec-3-2-2"><code>/dev/sdX</code></h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
Los discos están identificados con el prefijo <code>sd</code>, luego una letra
<code>a</code>, <code>b</code>, <code>c</code>, etc y finalmente un número <code>1</code>, <code>2</code>, <code>3</code>, etc que
identifica la partición:
</p>

<p>
Listamos el disco <code>sda</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">ls /dev/sda*
</pre>
</div>

<pre class="example">
/dev/sda
/dev/sda1
/dev/sda2
/dev/sda3
</pre>

<p>
Vemos si esta montado <code>sda</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">mount | grep sda
</pre>
</div>

<p>
Visualizamos el espacio disponible:
</p>

<div class="org-src-container">

<pre class="src src-sh">df -h | grep sda
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Entrada estándar, Salida estándar y Tuberías</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Descriptores de archivos</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Existen 3 descriptores básicos de archivos:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><code>0</code></td>
<td class="left"><code>stdin</code></td>
<td class="left">entrada estándar</td>
</tr>

<tr>
<td class="left"><code>1</code></td>
<td class="left"><code>stdout</code></td>
<td class="left">salida estándar</td>
</tr>

<tr>
<td class="left"><code>2</code></td>
<td class="left"><code>stderr</code></td>
<td class="left">salida de errores</td>
</tr>
</tbody>
</table>


<div class="figure">
<p><img src="img/stdin-stdout-stderr.png" alt="stdin-stdout-stderr.png" />
</p>
</div>

<p>
Es posible redireccionar cada uno de éstos descriptores mediante los
operadores <code>&gt;</code>, <code>&lt;</code> y <code>|</code>
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Enviar la salida estándar a un archivo</h3>
<div class="outline-text-3" id="text-4-2">

<div class="figure">
<p><img src="img/stdout-file.png" alt="stdout-file.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">Enviar la salida de errores a un archivo</h3>
<div class="outline-text-3" id="text-4-3">

<div class="figure">
<p><img src="img/stderr-file.png" alt="stderr-file.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4">Enviar la salida estándar y la salida de errores a un mismo archivo</h3>
<div class="outline-text-3" id="text-4-4">

<div class="figure">
<p><img src="img/stderr-stdout-file.png" alt="stderr-stdout-file.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5">Enviar la salida de errores a la salida estándar</h3>
<div class="outline-text-3" id="text-4-5">

<div class="figure">
<p><img src="img/stderr-stdout.png" alt="stderr-stdout.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6">Enviar la salida de estándar a <code>/dev/null</code></h3>
<div class="outline-text-3" id="text-4-6">

<div class="figure">
<p><img src="img/stdout-dev-null.png" alt="stdout-dev-null.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7">Enviar la salida de estándar y la salida de errores a <code>/dev/null</code></h3>
<div class="outline-text-3" id="text-4-7">

<div class="figure">
<p><img src="img/stderr-stdout-dev-null.png" alt="stderr-stdout-dev-null.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8">Enviar un archivo a la entrada estándar</h3>
<div class="outline-text-3" id="text-4-8">

<div class="figure">
<p><img src="img/stdin-file.png" alt="stdin-file.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9">Enviar la salida estándar a un archivo y a la salida estándar</h3>
<div class="outline-text-3" id="text-4-9">

<div class="figure">
<p><img src="img/tee-stdout-file.png" alt="tee-stdout-file.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10">Enviar la salida estándar de un comando como la entrada estándar de otro comando</h3>
<div class="outline-text-3" id="text-4-10">

<div class="figure">
<p><img src="img/stdout-pipe-stdin.png" alt="stdout-pipe-stdin.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-11" class="outline-3">
<h3 id="sec-4-11"><code>stdout</code></h3>
<div class="outline-text-3" id="text-4-11">
<p>
Buscar el texto <b>model</b> en el archivo <code>/proc/cpuinfo</code> y enviar el
resultado a un nuevo archivo llamado <code>/tmp/cpu</code> que contendrá
únicamente las líneas que coinciden con el texto <b>model</b>:
</p>

<div class="org-src-container">

<pre class="src src-sh">grep model /proc/cpuinfo &gt; /tmp/cpu
cat /tmp/cpu
</pre>
</div>

<pre class="example">
model       : 28
model name  : Intel(R) Atom(TM) CPU D425   @ 1.80GHz
model       : 28
model name  : Intel(R) Atom(TM) CPU D425   @ 1.80GHz
</pre>

<p>
Buscar el texto <b>cache</b> en el archivo <code>/proc/cpuinfo</code> y agregar el
resultado al archivo <code>/tmp/cpu</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">grep cache /proc/cpuinfo &gt;&gt; /tmp/cpu
cat /tmp/cpu
</pre>
</div>

<pre class="example">
model       : 28
model name  : Intel(R) Atom(TM) CPU D425   @ 1.80GHz
model       : 28
model name  : Intel(R) Atom(TM) CPU D425   @ 1.80GHz
cache size  : 512 KB
cache_alignment : 64
cache size  : 512 KB
cache_alignment : 64
</pre>
</div>
</div>

<div id="outline-container-sec-4-12" class="outline-3">
<h3 id="sec-4-12"><code>stderr</code></h3>
<div class="outline-text-3" id="text-4-12">
<p>
Enviar la salida con errores a <code>/dev/null</code>:
</p>

<pre class="example">
xkcd 2&gt;/dev/null
</pre>

<p>
Redireccionar la salida con errores a la salida estandar:
</p>

<pre class="example">
echo "xkcd" | grep 2&gt;&amp;1
</pre>
</div>
</div>

<div id="outline-container-sec-4-13" class="outline-3">
<h3 id="sec-4-13">pipes</h3>
<div class="outline-text-3" id="text-4-13">
<p>
El símbolo <code>|</code> es usado para redireccionar la salida de un comando
a la entrada de otro comando.
</p>

<p>
Ejemplo:
</p>

<p>
Lista el directorio <code>/var/log</code> ordenando los archivos más nuevos
al principio y muestra sólo las primeras 10 líneas mediante el
comando <code>head</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">ls -lht /var/log | head
</pre>
</div>

<pre class="example">
total 24M
-rw-r----- 1 root              adm  2,6M ago 12 18:40 mail.info
-rw-r----- 1 root              adm  2,6M ago 12 18:40 mail.log
-rw-r----- 1 root              adm  576K ago 12 18:40 syslog
-rw-r----- 1 root              adm  335K ago 12 18:40 auth.log
-rw-rw-r-- 1 root              utmp 228K ago 12 17:25 wtmp
-rw-rw-r-- 1 root              utmp 634K ago 12 17:20 lastlog
-rw-r----- 1 root              adm   20K ago 12 14:16 kern.log
-rw-r----- 1 root              adm   11K ago 12 14:16 messages
-rw-r----- 1 root              adm   460 ago 12 14:15 debug
</pre>

<p>
lista el directorio <code>/var/log</code> mostrando el tamaño de cada
archivo, se filtra el resultando por Megabytes (<code>M</code>), luego
ordena de mayor a menor y finalmente limita la lista a los
primeros 10 archivos que más espacio ocupan, incluyendo el total
del directorio:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #729fcf;">cd</span> /var/log;du -ch *  | grep M | sort -nr | head
</pre>
</div>

<pre class="example">
86M total
48M atop
15M installer
14M installer/cdebconf
5,2M    mail.log.1
5,2M    mail.info.1
2,6M    mail.log
2,6M    mail.info
1,1M    syslog.1
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Comandos básicos de terminal</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Directorios:</h3>
<div class="outline-text-3" id="text-5-1">
<p>
El separador de archivos y directorios es la barra <code>/</code>
</p>

<p>
ejemplos:
</p>

<pre class="example">
/              directorio raíz (*root*)
/etc           directorio usr (sub-directorio de la raíz =/=)
/etc/apache2   apache2 subdirectorio de /etc
</pre>
</div>

<div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1">Moviéndose en el sistema de archivos:</h4>
<div class="outline-text-4" id="text-5-1-1">
</div><div id="outline-container-sec-5-1-1-1" class="outline-5">
<h5 id="sec-5-1-1-1"><code>pwd</code></h5>
<div class="outline-text-5" id="text-5-1-1-1">
<p>
Muestra el directorio actual.
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-2" class="outline-5">
<h5 id="sec-5-1-1-2"><code>cd</code></h5>
<div class="outline-text-5" id="text-5-1-1-2">
<p>
Cambia al directorio definido en <code>HOME</code>
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-3" class="outline-5">
<h5 id="sec-5-1-1-3"><code>cd /etc/php5</code></h5>
<div class="outline-text-5" id="text-5-1-1-3">
<p>
Cambia el directorio actual a <code>/etc/php5</code>
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-4" class="outline-5">
<h5 id="sec-5-1-1-4"><code>cd apache2</code></h5>
<div class="outline-text-5" id="text-5-1-1-4">
<p>
Cambia al subdirectorio <code>apache2</code> del directorio actual
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-5" class="outline-5">
<h5 id="sec-5-1-1-5"><code>cd ..</code></h5>
<div class="outline-text-5" id="text-5-1-1-5">
<p>
Cambia al directorio inmediato superior
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-6" class="outline-5">
<h5 id="sec-5-1-1-6"><code>cd $HOME</code></h5>
<div class="outline-text-5" id="text-5-1-1-6">
<p>
Cambia al directorio definido en la variable <code>HOME</code>
</p>
</div>
</div>

<div id="outline-container-sec-5-1-1-7" class="outline-5">
<h5 id="sec-5-1-1-7"><code>cd ~osiris</code></h5>
<div class="outline-text-5" id="text-5-1-1-7">
<p>
Cambia al directorio del usuario osiris
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2">Listar directorios:</h4>
<div class="outline-text-4" id="text-5-1-2">
</div><div id="outline-container-sec-5-1-2-1" class="outline-5">
<h5 id="sec-5-1-2-1"><code>ls -l</code></h5>
<div class="outline-text-5" id="text-5-1-2-1">
<p>
Listar en formato ancho, de esta manera se visualizan gran parte de
los atributos de cada archivo y/o directorio
</p>

<pre class="example">
$ ls -l

-rw-rw-r-- 1 osiris www-data      612 nov  1 19:29 redes.html
-rw-rw-r-- 1 osiris www-data    11457 nov  1 19:31 scrum.html
-rw-rw-r-- 1 osiris www-data     6556 abr 24  2013 ssh.org
-rw-rw-r-- 1 osiris www-data      609 abr 24  2013 graphviz.org
-rw-rw-r-- 1 osiris www-data    17326 abr 24  2013 gnuplot.org
-rw-rw-r-- 1 osiris www-data    11457 nov  1 19:31 tmp
^ ^  ^  ^  ^ ^           ^          ^ ^      ^     ^
| |  |  |  | |           |          | |      |     |
| |  |  |  | propietario grupo tamaño fecha  hora  nombre
| |  |  |  número de links al archivo o contenido del directorio
| |  |  permisos para todos
| |  permisos para miembros del grupo
| permisos para el propietario del archivo:
|   r     lectura
|   w     escritura
|   x     ejecutar
|   -     ninguno
tipo de archivo:
  -   archivo normal
  d   directorio
  l   enlace simbolico
</pre>
</div>
</div>

<div id="outline-container-sec-5-1-2-2" class="outline-5">
<h5 id="sec-5-1-2-2"><code>ls</code></h5>
<div class="outline-text-5" id="text-5-1-2-2">
<p>
Listar directorio actual
</p>
</div>
</div>

<div id="outline-container-sec-5-1-2-3" class="outline-5">
<h5 id="sec-5-1-2-3"><code>ls -a</code></h5>
<div class="outline-text-5" id="text-5-1-2-3">
<p>
Listar directorio actual incluyendo archivos ocultos (comienzan con
<code>.</code>)
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Cambiando permisos y atributos</h3>
<div class="outline-text-3" id="text-5-2">
<pre class="example">
r = read        4
w = write       2
x = execute     1

propietario   7 = rwx lectura, escritura y ejecución
grupo         5 = rx- lectura y ejecución
todos         0 = --- ningún permiso
</pre>

<p>
Es necesario ser el propietario del archivo/directorio (o <i>root</i>)
para realizar el cambio de <code>usuario</code> o <code>grupo</code>.
</p>
</div>

<div id="outline-container-sec-5-2-1" class="outline-4">
<h4 id="sec-5-2-1"><code>chmod 750 archivo</code></h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
Listamos los permisos del archivo <code>~/.bash_history</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">ls -l ~/.bash_history
</pre>
</div>

<pre class="example">
-rw------- 1 osiris 1001 133030 ago 12 18:38 /home/osiris/.bash_history
</pre>

<p>
Cambiamos el permiso a <code>750</code> y volvemos a listar:
</p>

<div class="org-src-container">

<pre class="src src-sh">chmod 750 ~/.bash_history
ls -l ~/.bash_history
</pre>
</div>

<pre class="example">
-rwxr-x--- 1 osiris 1001 133030 ago 12 18:38 /home/osiris/.bash_history
</pre>

<p>
Finalmente cambiamos el permiso a <code>600</code> y volvemos a listar:
</p>

<div class="org-src-container">

<pre class="src src-sh">chmod 600 ~/.bash_history
ls -l ~/.bash_history
</pre>
</div>

<pre class="example">
-rw------- 1 osiris 1001 133030 ago 12 18:38 /home/osiris/.bash_history
</pre>
</div>
</div>

<div id="outline-container-sec-5-2-2" class="outline-4">
<h4 id="sec-5-2-2"><code>chgrp grupo archivo</code></h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
Establece el grupo al archivo
</p>
</div>
</div>

<div id="outline-container-sec-5-2-3" class="outline-4">
<h4 id="sec-5-2-3"><code>chown usuario archivo</code></h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
Establece el usuario como propietario del archivo
</p>
</div>
</div>

<div id="outline-container-sec-5-2-4" class="outline-4">
<h4 id="sec-5-2-4"><code>chown usuario archivo</code></h4>
<div class="outline-text-4" id="text-5-2-4">
<p>
Establece el usuario como propietario del directorio y todo su contenido recursivamente.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Moviendo, renombrando y copiando archivos:o</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Copiamos el archivo <code>~/.bash_history</code> a <code>~/.bash_history.bak</code> y
verificamos que sea igual:
</p>

<div class="org-src-container">

<pre class="src src-sh">ls -lh ~/.bash_history
cp ~/.bash_history ~/.bash_history.bak
ls -lh ~/.bash_history.bak
md5sum ~/.bash_history ~/.bash_history.bak
</pre>
</div>

<pre class="example">
-rw------- 1 osiris 1001 130K ago 12 18:38 /home/osiris/.bash_history
-rw------- 1 osiris osiris 130K ago 12 18:40 /home/osiris/.bash_history.bak
59ab28036524bc82b31bb93be8a42e97  /home/osiris/.bash_history
59ab28036524bc82b31bb93be8a42e97  /home/osiris/.bash_history.bak
</pre>

<p>
#+END_SRC
</p>

<p>
Movemos el archivo <code>~/.bash_history.bak</code> a <code>~/historial.bak</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">mv -vi ~/.bash_history.bak ~/historial.bak
ls -l ~/.bash_history ~/historial.bak
</pre>
</div>

<pre class="example">
-rw------- 1 osiris   1001 133030 ago 12 18:38 /home/osiris/.bash_history
-rw------- 1 osiris osiris  32032 abr 28 14:49 /home/osiris/historial.bak
</pre>


<p>
Renombramos el archivo <code>~/historial.bak</code> a <code>~/historial.log</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">mv -vi ~/historial.bak ~/historial.log
ls -l ~/historial.log
</pre>
</div>

<pre class="example">
-rw------- 1 osiris osiris 31848 abr 28 14:45 /home/osiris/historial.log
</pre>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4">Ver y editar arhivos:</h3>
<div class="outline-text-3" id="text-5-4">
</div><div id="outline-container-sec-5-4-1" class="outline-4">
<h4 id="sec-5-4-1"><code>cat</code></h4>
<div class="outline-text-4" id="text-5-4-1">
<div class="org-src-container">

<pre class="src src-sh">cat /etc/issue
</pre>
</div>

<pre class="example">
Debian GNU/Linux 7 \n \l
</pre>
</div>
</div>

<div id="outline-container-sec-5-4-2" class="outline-4">
<h4 id="sec-5-4-2"><code>head</code></h4>
<div class="outline-text-4" id="text-5-4-2">
<div class="org-src-container">

<pre class="src src-sh">head /proc/meminfo | head
</pre>
</div>

<pre class="example">
MemTotal:        2062460 kB
MemFree:          555116 kB
Buffers:           42752 kB
Cached:           538764 kB
SwapCached:            0 kB
Active:          1088768 kB
Inactive:         327160 kB
Active(anon):     855652 kB
Inactive(anon):    39880 kB
Active(file):     233116 kB
</pre>
</div>
</div>

<div id="outline-container-sec-5-4-3" class="outline-4">
<h4 id="sec-5-4-3"><code>head -2</code></h4>
<div class="outline-text-4" id="text-5-4-3">
<div class="org-src-container">

<pre class="src src-sh">head /proc/meminfo | head -2
</pre>
</div>

<pre class="example">
MemTotal:        2062460 kB
MemFree:          555116 kB
</pre>
</div>
</div>

<div id="outline-container-sec-5-4-4" class="outline-4">
<h4 id="sec-5-4-4"><code>tail</code></h4>
<div class="outline-text-4" id="text-5-4-4">
<div class="org-src-container">

<pre class="src src-sh">tail /etc/passwd
</pre>
</div>

<pre class="example">
hplip:x:106:7:HPLIP system user,,,:/var/run/hplip:/bin/false
pulse:x:107:113:PulseAudio daemon,,,:/var/run/pulse:/bin/false
mdm:x:108:116:MDM Display Manager:/var/lib/mdm:/bin/false
saned:x:109:117::/home/saned:/bin/false
alumno:x:1000:1000:Alumno,,,:/home/alumno:/bin/bash
osiris:x:2222:2222:OSiRiS,,,,:/home/osiris:/bin/bash
sshd:x:110:65534::/var/run/sshd:/usr/sbin/nologin
Debian-exim:x:111:120::/var/spool/exim4:/bin/false
postfix:x:112:121::/var/spool/postfix:/bin/false
debian-tor:x:113:123::/var/lib/tor:/bin/false
</pre>

<div class="org-src-container">

<pre class="src src-sh">tail -2 /etc/passwd
</pre>
</div>

<pre class="example">
postfix:x:112:121::/var/spool/postfix:/bin/false
debian-tor:x:113:123::/var/lib/tor:/bin/false
</pre>
</div>
</div>

<div id="outline-container-sec-5-4-5" class="outline-4">
<h4 id="sec-5-4-5"><code>sed</code></h4>
<div class="outline-text-4" id="text-5-4-5">
<div class="org-src-container">

<pre class="src src-sh">cat /etc/issue
sed s/<span style="color: #ad7fa8; font-style: italic;">"7.0"</span>/<span style="color: #ad7fa8; font-style: italic;">"8.0"</span>/g /etc/issue
cat /etc/issue
</pre>
</div>

<pre class="example">
Debian GNU/Linux 7 \n \l

Debian GNU/Linux 7 \n \l

Debian GNU/Linux 7 \n \l
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5">Expresiones regulares</h3>
<div class="outline-text-3" id="text-5-5">
<p>
Se utilizan para definir patrones para la búsqueda y filtrado:
</p>
</div>

<div id="outline-container-sec-5-5-1" class="outline-4">
<h4 id="sec-5-5-1"><code>[a-z]</code> Minúsculas</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
Rango de la <b>a</b> a la <b>z</b>
</p>
</div>
</div>

<div id="outline-container-sec-5-5-2" class="outline-4">
<h4 id="sec-5-5-2"><code>[A-Z]</code> Mayúsculas</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
Rango de la <b>A</b> a la <b>Z</b>
</p>
</div>
</div>

<div id="outline-container-sec-5-5-3" class="outline-4">
<h4 id="sec-5-5-3"><code>[0-9]</code> Números</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
Rango de 0 a 9
</p>
</div>
</div>

<div id="outline-container-sec-5-5-4" class="outline-4">
<h4 id="sec-5-5-4"><code>[^..]</code> Patrón distinto</h4>
<div class="outline-text-4" id="text-5-5-4">
<p>
Negación
</p>
</div>
</div>

<div id="outline-container-sec-5-5-5" class="outline-4">
<h4 id="sec-5-5-5"><code>^</code> comienzo de línea</h4>
</div>


<div id="outline-container-sec-5-5-6" class="outline-4">
<h4 id="sec-5-5-6"><code>$</code> fin de línea</h4>
</div>

<div id="outline-container-sec-5-5-7" class="outline-4">
<h4 id="sec-5-5-7"><code>.</code> cualquier carácter</h4>
</div>

<div id="outline-container-sec-5-5-8" class="outline-4">
<h4 id="sec-5-5-8"><code>?</code> cero o una aparición</h4>
</div>

<div id="outline-container-sec-5-5-9" class="outline-4">
<h4 id="sec-5-5-9"><code>*</code> ninguna o muchas repeticiones</h4>
</div>

<div id="outline-container-sec-5-5-10" class="outline-4">
<h4 id="sec-5-5-10"><code>+</code> una o más repeticiones</h4>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Acceso remoto usando ssh</h2>
<div class="outline-text-2" id="text-6">
<p>
<code>ssh</code> permite la ejecución remota de un intérprete de comandos
como <code>bash</code>
</p>

<ul class="org-ul">
<li>Más información en: <a href="https://es.wikipedia.org/wiki/Ssh">https://es.wikipedia.org/wiki/Ssh</a>
</li>
</ul>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">¿qué ventajas tiene?</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li><b>Es seguro</b> porque cifra la conexión y nadie puede ver qué
estamos haciendo
</li>
<li><b>Es rápido</b> porque sólo envía texto, por ello envía menos datos
que si fuera una imagen de pantalla como programas como <code>vnc</code>
</li>
<li><b>Es versátil</b> porque permite interactuar con otros comandos
obteniendo control total de un sistema de manera remota.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">¿qué necesito para usar SSH?</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li><i>computadora remota</i>
<ul class="org-ul">
<li><b>servidor SSH</b>
<ul class="org-ul">
<li>se instala haciendo:
</li>
</ul>
</li>
</ul>
<pre class="example">
sudo apt-get install openssh-server
</pre>
<ul class="org-ul">
<li><b>conexión a la red</b> (si es internet mejor!)
</li>
<li><b>puerto 22 abierto</b> (OjO con el firewall)
</li>
<li>que la computadora esté encendida! (aunque más adelante
veremos cómo encender remotamente una computadora)
</li>
</ul>
</li>
<li><i>computadora local</i>
<ul class="org-ul">
<li><b>cliente ssh</b>
<ul class="org-ul">
<li>en todos los linux <b>ya está instalado</b>!
</li>
<li>en otros sistemas pod usar <a href="https://es.wikipedia.org/wiki/PuTTY">PuTTY</a>
</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/PuTTY">https://es.wikipedia.org/wiki/PuTTY</a>
</li>
<li><b>dirección IP</b> de computadora remota
</li>
<li><b>usuario válido</b> de computadora remota
</li>
<li><b>contraseña</b> del usuario de la computadora remota
</li>
<li>que el <b>puerto 22 de salida esté habilitado</b> en el firewall
(aunque hay trucos para saltearlo)
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">¿cómo me conecto por SSH?</h3>
<div class="outline-text-3" id="text-6-3">
<p>
En una terminal hay que escribir el comando <code>ssh</code> luego el
usuario remoto, por ejemplo: <b>pepe</b> y separado por un <b>@</b> arroba
la dirección <b>IP</b> o el dominio (ej: <code>192.168.0.9</code> ó <code>osiux.com</code>)
</p>

<div class="org-src-container">

<pre class="src src-sh">ssh pepe@192.168.0.9
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">¿qué sucede la primera vez?</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Siempre que nos conectamos por primera vez a un servidor SSH, nos
aparece un mensaje para que confirmemos la autenticidad de la
computadora a la que estamos conectándonos, por ahora somos
confiados y le decimos que sí, tipeando <b>yes</b>
</p>

<pre class="example">
osiris@osiux.com:/home/osiris# ssh 192.168.0.9
The authenticity of host 'lab2 (192.168.0.9)' can't be established.
RSA key fingerprint is e1:92:a3:54:95:e6:67:b8:89:80:11:02:93:f4:05:36.
Are you sure you want to continue connecting (yes/no)?
</pre>

<ul class="org-ul">
<li>Las próximas veces este paso no es necesario.
</li>
<li>Luego ingresamos la contraseña (password en inglés) y si es
correcta, ingresamos al sistema remoto!
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5">Listo, entré a la matrix! ¿y ahora?</h3>
<div class="outline-text-3" id="text-6-5">
<p>
Ahora podemos hacer todo lo que el usuario que usamos para
conectarnos (en este caso <b>pepe</b>) pueda hacer!
</p>

<p>
Ahora bien, resulta que este sistema remoto cuenta con un
administrador, que ve que alguien que no es él, ingresó al
sistema con su usuario! Entonces va a matar todos los procesos
del usuario <b>pepe</b>, a fin de dejarnos afuera del sistema.
</p>

<p>
Para esto, utiliza la herramienta <code>htop</code> que muestra todos los
procesos y presionando la tecla <code>F4</code> nos permite filtrar por la
palabra <b>pepe</b> y luego presionando <code>F9</code> y eligiendo <code>SIGKILL</code>
termina cada uno de los procesos del usuario <b>pepe</b>.
</p>

<p>
También se puede hacer desde la consola sin usar <code>htop</code>
</p>

<pre class="example">
root@lab2:/# pkill -u pepe
</pre>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6">El intruso va por la revancha!</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Como lo dejamos afuera a <b>pepe</b> matando sus procesos, ahora está
enojado! Entonces nos empieza a crear <b>carpetas</b> en
el <b>Escritorio</b> de la siguiente manera:
</p>

<pre class="example">
pepe@lab2:~/$ cd Escritorio
pepe@lab2:~/$ mkdir aguante
pepe@lab2:~/$ mkdir la
pepe@lab2:~/$ mkdir academia
</pre>

<p>
Si sigue así en algún momento nos va a llenar el <b>Escritorio</b>
</p>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7">Eliminando al intruso!</h3>
<div class="outline-text-3" id="text-6-7">
<p>
Matar los procesos activos no es suficiente, debemos eliminar al
usuario, para esto hacemos:
</p>

<pre class="example">
root@lab2:/# deluser pepe
</pre>

<ul class="org-ul">
<li>Listo! ahora <b>pepe</b> no puede ingresar a nuestro sistema
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8">El intruso es duro de domar!</h3>
<div class="outline-text-3" id="text-6-8">
<p>
Resulta que <b>pepe</b> cuando ingresó la primera vez, fue astuto y
cambió la contraseña de <b>root</b>. ¿Y cómo pudo hacerlo? es simple,
el usuario <b>pepe</b> tenía permisos para usar <b>sudo</b> que permite
convertirse en <b>root</b> (y ser el <b>DIOS</b> del sistema).
Para cambiar la password hizo lo siguiente:
</p>

<pre class="example">
pepe@lab2:~/$ sudo -s
[sudo] password for pepe: 
root@lab2:/#

root@lab2:/# passwd
Cambiando la contraseña de root.
Introduzca la nueva contraseña de UNIX: 
Vuelva a escribir la nueva contraseña de UNIX:
</pre>
</div>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9">¿Y ahora quién podrá defendernos?</h3>
<div class="outline-text-3" id="text-6-9">
<p>
Si un intruso logró obtener cuenta <b>root</b>, estamos fritos! tiene
completo control del sistema y sin que nos demos cuenta, salvo
que haga algo muy evidente como borrar todo el disco, va a pasar
desapercibido. Qué podemos hacer, para evitar esto?
</p>

<ul class="org-ul">
<li>Utilizar contraseñas fuertes, usando <code>md5</code> por ejemplo:
<pre class="example">
echo -n maradona | md5sum
8b123b7a7cf86f5aa9424d1f379384d8
</pre>
</li>
<li>Mucho más fácil de recordar, frases de paso:
<pre class="example">
Se te escapo la tortuga!
</pre>
</li>
<li>NO usar la misma contraseña en todos lados!
</li>
<li>NO usar <b>sudo</b>, loguearse como <b>root</b> sólo para tareas
administrativas
</li>
<li>NO permitir el login del usuario <b>root</b>
</li>
<li>Sólo permitir login por <i>SSH</i> desde algunas IPs
</li>

<li>OjO: aunque quitando el cable de red, basta para desconectar a
los intrusos, hoy día casi que vuelve inservible una compu
desconectada del mundo!
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10">Controlando la matrix!</h3>
<div class="outline-text-3" id="text-6-10">
<p>
Si bien usamos el ejemplo de un intruso, lo más probable es que
nosotros seamos root en muchos otros sistemas, como la compu del
trabajo, la de casa, la de un amigo/a, etc. Y poder administrar
varios sistemas remotos usando <i>SSH</i> u una sola terminal es
posible.
</p>

<p>
Para esto instalamos <b>Terminator</b>
</p>
<pre class="example">
sudo apt-get install terminator
</pre>

<p>
Iniciamos <b>Terminator</b> y presionando <b>CTRL-SHIFT-E</b> y <b>CTRL-SHIFT-O</b>
podemos dividir la pantalla vertical y horizontalmente tantas
veces como sea necesario, obteniendo muchas terminales dentro de
una sola y eligiendo la opción <b>retransmitir a todas</b> podemos
tipear una sola vez y que ese comando vaya a todas las terminales
conectadas! :-D
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Entornos gráficos, ejecución remota de aplicaciones gráficas</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><code>ssh -X</code></h3>
<div class="outline-text-3" id="text-7-1">
<p>
Es posible ejecutar una aplicación gráfica de un servidor remoto
visualizando en el equipo local por medio de <code>ssh</code>, solo es
necesario incluir el parámetro <code>-X</code> y el servidor <i>X</i> se
redireciona a nuestro <i>host</i>
</p>

<pre class="example">
ssh -X caipiroska 'gnome-calculator'
</pre>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><code>DISPLAY\</code>:0=</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Utilizando la aplicación <code>notify-send</code> se puede enviar un mensaje
de notificación, normalmente es utilizado para visualizar eventos
del sistema, y estoy lo podemos hacer en un equipo remoto mediante
<code>ssh</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">ssh -X osiris@localhost <span style="color: #ad7fa8; font-style: italic;">"DISPLAY=:0 notify-send 'hola!'"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><code>vnc4server</code></h3>
<div class="outline-text-3" id="text-7-3">
<p>
Habitualmente se utiliza <b>VNC</b> para compartir la sesión actual,
pero también se pueden levantar instancias nuevas, pudiendo tener
entornos gráficos diferentes en cada sesión de usuario en el mismo
servidor.
</p>

<p>
Es necesario ejecutar en el servidor:
</p>

<pre class="example">
vnc4server
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Procesos</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">¿Qué es proceso?</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>Un proceso es la instancia de un programa en ejecución.
</li>
<li>También se lo conoce como tarea.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2">¿Por qué?</h3>
<div class="outline-text-3" id="text-8-2">
<ul class="org-ul">
<li>GNU/Linux es un sistema multitarea, permite la ejecución de
múltiples procesos al mismo tiempo.
</li>

<li>Comprender el concepto de procesos nos permite administrar el
rendimiento de nuestro equipo.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3">Lo que el usuario ve:</h3>
<div class="outline-text-3" id="text-8-3">

<div class="figure">
<p><img src="img/cfp-procesos-01.png" alt="cfp-procesos-01.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4">Lo que el sistema ve:</h3>
<div class="outline-text-3" id="text-8-4">

<div class="figure">
<p><img src="img/cfp-procesos-03.png" alt="cfp-procesos-03.png" />
</p>
</div>


<div class="figure">
<p><img src="img/cfp-procesos-04.png" alt="cfp-procesos-04.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><code>PID</code></h3>
<div class="outline-text-3" id="text-8-5">
<ul class="org-ul">
<li>Todo proceso que se inicia tiene un número asignado llamado
<b>PID</b>.
</li>

<li>Este <b>PID</b> permite identificar el proceso y administrarlo
(detenerlo, reanudarlo etc&#x2026;)
</li>

<li>Ejemplo: Para obtener el <b>PID</b> de un proceso podemos usar el
comando <code>pidof</code>:

<div class="org-src-container">

<pre class="src src-sh">pidof init emacs
</pre>
</div>

<pre class="example">
1 12994
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6">Listar procesos</h3>
<div class="outline-text-3" id="text-8-6">
<p>
El comando <code>ps</code> puede listar el estado de los procesos:
</p>


<div class="figure">
<p><img src="img/cfp-procesos-07.png" alt="cfp-procesos-07.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7">Operaciones</h3>
<div class="outline-text-3" id="text-8-7">
<p>
Los procesos se pueden controlar de manera externa.
</p>

<p>
El comando <code>kill</code>, <code>xkill</code> o <code>killall</code> permite enviarle señales a
los procesos. Por ejemplo la señal de terminación:
</p>


<div class="figure">
<p><img src="img/cfp-procesos-08.png" alt="cfp-procesos-08.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8">Jerarquía</h3>
<div class="outline-text-3" id="text-8-8">
<p>
El comando pstree nos permite ver la organización de los procesos
en ejecución:
</p>

<div class="org-src-container">

<pre class="src src-sh">ps -fax | grep -A 10 bash | head
</pre>
</div>

<pre class="example">
8738 pts/16   Ss     0:01          \_ -bash
8846 pts/16   S+     0:00              \_ tmux a
3142 ?        S     10:46 /usr/sbin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc --hush
3167 ?        Sl     0:00 /usr/sbin/console-kit-daemon --no-daemon
3331 tty2     Ss+    0:00 /sbin/getty 38400 tty2
3332 tty3     Ss+    0:00 /sbin/getty 38400 tty3
3333 tty4     Ss+    0:00 /sbin/getty 38400 tty4
3334 tty5     Ss+    0:00 /sbin/getty 38400 tty5
3335 tty6     Ss+    0:00 /sbin/getty 38400 tty6
3336 tty8     Ss+    0:00 /sbin/getty 38400 tty8
</pre>

<div class="org-src-container">

<pre class="src src-sh">pstree -p -U | head
</pre>
</div>

<pre class="example">
init(1)─┬─/usr/bin/termin(5367)─┬─bash(5375)───tmux(5437)───sh(343)───vlock-main(349)
        │                       ├─gnome-pty-helpe(5374)
        │                       └─{/usr/bin/termin}(5376)
        ├─/usr/bin/termin(11004)─┬─bash(11015)───tmux(11090)───sh(5401)───vlock-main(5402)
        │                        ├─gnome-pty-helpe(11014)
        │                        └─{/usr/bin/termin}(11016)
        ├─/usr/bin/termin(20196)─┬─bash(20202)───tmux(12533)───sh(344)───vlock-main(348)
        │                        ├─gnome-pty-helpe(20201)
        │                        └─{/usr/bin/termin}(20203)
        ├─/usr/bin/termin(23477)─┬─bash(23484)───mocp(26199)
</pre>
</div>
</div>

<div id="outline-container-sec-8-9" class="outline-3">
<h3 id="sec-8-9">En tiempo real</h3>
<div class="outline-text-3" id="text-8-9">
<p>
Para visualizar los procesos en ejecución, también se puede usar
<code>htop</code> o <code>top</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #729fcf;">export</span> <span style="color: #ff6347;">TERM</span>=linux
top -b -n1 | head -20
</pre>
</div>

<pre class="example">
top - 18:40:39 up 8 days,  9:28,  9 users,  load average: 1,52, 0,64, 0,72
Tasks: 193 total,   2 running, 191 sleeping,   0 stopped,   0 zombie
%Cpu(s): 10,8 us,  4,1 sy,  7,5 ni, 76,2 id,  1,3 wa,  0,0 hi,  0,1 si,  0,0 st
KiB Mem:   2062460 total,  1507732 used,   554728 free,    43040 buffers
KiB Swap:        0 total,        0 used,        0 free,   538664 cached

  PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND
18693 osiris    20   0  4428 1200  940 R   5,9  0,1   0:00.03 top
30367 osiris    20   0  214m  45m  10m R   5,9  2,3  22:24.67 plugin-containe
    1 root      20   0  2204  632  528 S   0,0  0,0   0:09.43 init
    2 root      20   0     0    0    0 S   0,0  0,0   0:00.21 kthreadd
    3 root      20   0     0    0    0 S   0,0  0,0   2:46.37 ksoftirqd/0
    6 root      rt   0     0    0    0 S   0,0  0,0   0:02.32 migration/0
    7 root      rt   0     0    0    0 S   0,0  0,0   0:02.74 watchdog/0
    8 root      rt   0     0    0    0 S   0,0  0,0   0:02.39 migration/1
   10 root      20   0     0    0    0 S   0,0  0,0   2:45.86 ksoftirqd/1
   12 root      rt   0     0    0    0 S   0,0  0,0   0:02.45 watchdog/1
   13 root       0 -20     0    0    0 S   0,0  0,0   0:00.00 cpuset
   14 root       0 -20     0    0    0 S   0,0  0,0   0:00.00 khelper
   15 root      20   0     0    0    0 S   0,0  0,0   0:00.00 kdevtmpfs
</pre>


<div class="figure">
<p><img src="img/cfp-procesos-11.png" alt="cfp-procesos-11.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-10" class="outline-3">
<h3 id="sec-8-10">Resumen</h3>
<div class="outline-text-3" id="text-8-10">
<ul class="org-ul">
<li>Los procesos son instancias de programas en funcionamiento.
</li>
<li>Los recursos del sistema son limitados, el sistema administra y
hace posible compartir recursos.
</li>
<li>Cada proceso tiene un identiﬁcador (<code>PID</code>), que nos sirve para
enviar señales.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-11" class="outline-3">
<h3 id="sec-8-11">Changelog</h3>
<div class="outline-text-3" id="text-8-11">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2013-03-18 lun]</span></span> migro <a href="http://wiki.gcoop.coop/_media/apuntes:procesos.pdf">slides pdf</a> de Hugo Ruscitti a <code>.org</code>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Automatizando tareas: <code>sleep</code>, <code>jobs</code>, <code>crontab</code></h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1">Procesos padres e hijos</h3>
<div class="outline-text-3" id="text-9-1">
<p>
Cada vez que ejecutamos un comando en una terminal, éste comando
se convierte en un proceso hijo de la terminal que estamos
ejecutando.  Por ejemplo, si estamos en la interfase gráfica, la
terminal sería <b>gnome-terminal</b> quien a su vez invoca al
intérprete <b>bash</b> y desde ahí podríamos invocar a <b>firefox</b>. Esto
se puede visualizar de la siguiente manera:
</p>

<pre class="example">
# ps fax | grep -C3 firefox

 4444 ?        Ssl    0:13 gnome-terminal
 4453 ?        Z      0:00  \_ gnome-pty-helper
 4454 pts/10   Ss     0:00  \_ bash
 4509 pts/10   S+     0:52      \_ firefox
 6347 pts/13   Ss     0:00  \_ bash
11781 pts/13   S+     0:01  |   \_ ps fax
11782 pts/13   S+     0:01  |   \_ grep -C3 firefox
</pre>

<p>
Lo que vemos es el árbol de ejecución de procesos y si cerramos
la terminal, también se cerraría <b>firefox</b> por depender del
proceso <b>terminal</b>.
</p>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2">Para mí, vos estás en segundo plano</h3>
<div class="outline-text-3" id="text-9-2">
<p>
Al ejecutar un comando en una terminal, por ejemplo <b>top</b>, este
comando pasa a estar en primer plano y hasta que no interrumpamos
el comando presionando <b>CTRL-C</b> o saliendo del mismo mediante la
tecla <b>q</b>, no se puede ejecutar ningún otro comando en el misma
terminal. Para solucionar este inconveniente es posible pasar el
proceso a <b>segundo plano</b>, para esto sólo basta
presionar <b>CTRL-Z</b>, lo cual nos devuelve el <b>PROMPT</b> de la
terminal para que invoquemos nuevos comandos.
</p>

<p>
Es posible visualizar la lista de tareas mediante el
comando <b>jobs</b>, en este caso nos mostraría que está detenido:
</p>

<pre class="example">
# jobs
[1]+  Detenido                top
</pre>

<p>
Para recuperar la ejecución de <b>top</b> podemos escribir <b>fg</b> que
significa <b>foreground</b> o sea, pasar a primer plano.
</p>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3">Sos tan lento&#x2026; que no te quiero ver</h3>
<div class="outline-text-3" id="text-9-3">
<p>
También se puede enviar a segundo plano un comando ni bien lo
invocamos, generalmente esto, se hace con comandos que sabemos
que van a tardar mucho, como por ejemplo listar todos los
archivos que hay en el disco rígido y enviarlo a un archivo, para
esto solo basta agregar el caracter <b>&amp;</b> o <b>ampersand</b> al final de
un comando:
</p>

<pre class="example">
# find / &gt;/tmp/archivos.log &amp;
</pre>

<p>
De esta manera, el comando <b>find</b> lista todos los archivos que se
encuentran en la raíz <b>/</b> y los envía a un archivo usando <b>&gt;</b>.
</p>

<p>
Podemos ver que el total de líneas del archivo crece mediante el
comando <b>wc</b>:
</p>

<pre class="example">
# wc -l /tmp/archivos.log
</pre>

<p>
Algunos comandos ya incluyen una función de segundo plano, por
ejemplo <b>wget</b> que sirve para descargar archivos, mediante el
parámetro <b>-b</b> redirecciona la salida del comando al
archivo <b>wget-log</b> y nos permite seguir trabajando.
</p>

<pre class="example">
# wget -b http://releases.ubuntu.com/precise/ubuntu-12.04.1-desktop-i386.iso
Continuando en segundo plano, pid 12949.
La salida será escrita a “wget-log”.
</pre>

<p>
Para visualizar si se completó la descargar, solo basta mirar el
archivo <b>wget-log</b>, en la última línea debería decir 100%:
</p>

<pre class="example">
  cat ~/wget-log

--2012-10-29 18:28:50--  http://releases.ubuntu.com/precise/ubuntu-12.04.1-desktop-i386.iso
Resolviendo localhost (localhost)... 127.0.0.1
Conectando con localhost (localhost)[127.0.0.1]:8123... conectado.
Petición Proxy enviada, esperando respuesta... 200 OK
Longitud: 729067520 (695M) [application/x-iso9660-image]
Grabando a: “ubuntu-12.04.1-desktop-i386.iso”

 0K .......... .......... .......... .......... ..........  0% 24,7K 8h0m
    50K .......... .......... .......... .......... ..........  0% 68,8K 5h26m
   100K .......... .......... .......... .......... ..........  0% 61,5K 4h41m
   150K .......... .......... .......... .......... ..........  0% 66,8K 4h15m
</pre>
</div>
</div>

<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4">Esta compu, se destruye en 5 minutos!</h3>
<div class="outline-text-3" id="text-9-4">
<p>
En ocasiones es necesario ejecutar algún comando dentro de cierto
tiempo, por ejemplo dentro de 5 minutos, para ello se puede
utilizar <b>sleep</b>, luego se ingresa el tiempo usando <b>s</b> para
segundos, <b>m</b> para minutos y <b>h</b> para horas:
</p>

<pre class="example">
# sleep 5m; reboot
</pre>
</div>
</div>

<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5">Tengo un crontab para no olvidar nada</h3>
<div class="outline-text-3" id="text-9-5">
<p>
Mediante el uso del <b>crontab</b> es posible definir la ejecución de
tareas de manera específica.
</p>

<p>
Es posible entonces programar una tarea de manera diaria,
semanal, mensual, etc:
</p>

<pre class="example">
# Usar numeral para escribir comentarios
# +---------------- minutos (0 - 59)
# |  +------------- horas (0 - 23)
# |  |  +---------- día del mes (1 - 31)
# |  |  |  +------- mes (1 - 12)
# |  |  |  |  +---- día de la semana (0 - 7) (Domingo=0 or 7)
# |  |  |  |  |
# *  *  *  *  *     comando a ejecutar

*/5  *  *  *  *     /root/cada-5-minutos.sh
  0 23  *  *  *     /root/backup-diario.sh
  0  0  1  *  *     /root/backup-mensual.sh
  0 23 31 12  *     /root/backup-anual.sh
  0 12  *  *  0     DISPLAY=:0.0 /usr/bin/notify-send "asadito"
  0 12 29  *  *     DISPLAY=:0.0 /usr/bin/notify-send "ñoquis"
</pre>

<p>
Para editar, ejecutar:
</p>
<pre class="example">
# crontab -e
</pre>

<p>
Para listar, ejecutar:
</p>
<pre class="example">
# crontab -l
</pre>
</div>
</div>

<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6">Robotizando el mouse</h3>
<div class="outline-text-3" id="text-9-6">
<p>
Muchas veces, puede resultar muy útil automatizar tareas de la
interfase gráfica pero usando una terminal, para esto es
necesario instalar <b>xautomation</b>:
</p>

<pre class="example">
# sudo apt-get install xautomation
</pre>

<p>
Una vez instalado, es posible mover el mouse y hacer click en un
lugar determinado de la pantalla de la siguiente manera:
</p>

<pre class="example">
# xte 'mousemove 100 300'; xte 'mouseclick 1'
</pre>

<p>
La orden <b>mousemove 100 300</b> hace que el mouse se mueva a la
posicion 100 en el eje X, o sea a 100 pixels de la esquina
izquiera del monitor, de igual manera a 300 pixels en el eje Y.
</p>

<p>
La orden <b>mouseclick 1</b> emula un click en el botón izquierdo del
mouse.
</p>

<p>
Imaginemos que por algún motivo, necesitamos movernos a un lugar
en la pantalla y hacer muchos clicks, por ejemplo para avanzar de
página en internet y queremos capturar la pantalla antes de hacer
click y asi guardar lo que se está mostrando.
</p>

<p>
Entonces necesitamos instalar un capturador de pantalla que
funcione desde la terminal, por ejemplo <b>scrot</b>:
</p>

<pre class="example">
# sudo apt-get install scrot
</pre>

<p>
Ahora bien, ya sabemos movernos por la pantalla, hacer click y
tenemos un comando que captura la pantalla, sólo bastaría hacer
un pequeño programa que repita la operación, por ejemplo 186
veces!:
</p>

<pre class="example">
# for i in {1..186};do scrot; xte 'mousemove 100 300'; xte 'mouseclick 1'; sleep 3s;done
</pre>

<p>
Listo, en una sóla línea es posible definirlo, basta con
presionar <b>ENTER</b> y vamos a obtener 186 imágenes distintas.
</p>

<p>
Veamos que hace cada línea, paso a paso:
</p>

<pre class="example">
for i in {1..186}  # incrementa el valor de i desde 1 a 186
do # inicia la ejecucion
scrot # captura la pantalla
xte 'mousemove 100 300' # mueve el mouse a la posicion 100,300
xte 'mouseclick 1' # presiona click izquierdo del mouse
sleep 3s # espera 3 segundos
done # termina la ejecucion
</pre>

<p>
De esta simple manera, se pueden automatizar muchísimas tareas!
</p>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Análisis de tráfico de red con <code>tcpdump</code> y <code>wireshark</code></h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1">la era de la inocencia</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Iniciamos Firefox como es costumbre de todos los días y empezamos
a saltar de un sitio web a otro. Nada extraño sucede, leemos y
escribimos comentarios, ingresamos a algún chat, en fin nos
comunicamos con otras personas a través de la red.
</p>

<p>
Suponemos que debido a que estamos solos frente a la compu, nadie
más está viendo todo lo que enviamos y recibimos a través de la
red&#x2026; :-S
</p>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2">olfateando la red</h3>
<div class="outline-text-3" id="text-10-2">
<p>
Si mientras estamos usando la red, se nos ocurre ver qué datos
pasan a través de la red, sólo necesitamos usar  <code>tcpdump</code>:
</p>

<pre class="example">
sudo apt-get install tcpdump
</pre>

<p>
Su uso es muy simple, solo basta indicar la interfaz de red:
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo tcpdump -i eth2
</pre>
</div>

<p>
El resultado es similar al siguiente:
</p>

<pre class="example">
10:09:54.261674 IP malbec.ssh &gt; osiale.gcoop.com.ar.49322: Flags [P.], seq 2750542384:2750543808, ack 4116367059, win 1331, options [nop,nop,TS val 20388916 ecr 20607900], length 1424
10:09:54.261748 IP osiale.gcoop.com.ar.49322 &gt; malbec.ssh: Flags [.], ack 1424, win 1321, options [nop,nop,TS val 20607950 ecr 20388916], length 0
10:09:54.263027 IP osiale.gcoop.com.ar.46685 &gt; malbec.domain: 7023+ PTR? 18.1.168.192.in-addr.arpa. (45)
10:09:54.263195 IP malbec.domain &gt; osiale.gcoop.com.ar.46685: 7023* 1/0/0 PTR osiale.gcoop.com.ar. (78)
10:09:54.540654 IP malbec.ssh &gt; osiale.gcoop.com.ar.49322: Flags [P.], seq 1424:2512, ack 1, win 1331, options [nop,nop,TS val 20388986 ecr 20607950], length 1088
10:09:54.540690 IP osiale.gcoop.com.ar.49322 &gt; malbec.ssh: Flags [.], ack 2512, win 1321, options [nop,nop,TS val 20608019 ecr 20388986], length 0
10:09:54.606095 IP osiale.gcoop.com.ar.48150 &gt; malbec.domain: 29621+ A? daisy.ubuntu.com. (34)
10:09:54.606229 IP malbec.domain &gt; osiale.gcoop.com.ar.48150: 29621 2/0/0 A 91.189.95.55, A 91.189.95.54 (66)
10:09:54.785237 IP malbec.ssh &gt; osiale.gcoop.com.ar.49322: Flags [.], seq 2512:3960, ack 1, win 1331, options [nop,nop,TS val 20389047 ecr 20608019], length 1448
10:09:54.785281 IP osiale.gcoop.com.ar.49322 &gt; malbec.ssh: Flags [.], ack 3960, win 1321, options [nop,nop,TS val 20608081 ecr 20389047], length 0
</pre>

<p>
Lo que vemos, es la información del encabezado de cada paquete
que pasa por la interfaz de red, en este caso <code>eth2</code>.
</p>

<p>
Si no sabemos qué interfaz de red utilizar o simplemente ver
cuáles están disponibles, usamos el comando <code>ifconfig</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">ifconfig
</pre>
</div>

<p>
Veríamos un listado similar al siguiente:
</p>

<pre class="example">
eth0      Link encap:Ethernet  direcciónHW 00:15:d2:19:5b:7d  
	  ACTIVO DIFUSIÓN MULTICAST  MTU:1500  Métrica:1
	  Paquetes RX:0 errores:0 perdidos:0 overruns:0 frame:0
	  Paquetes TX:0 errores:0 perdidos:0 overruns:0 carrier:0
	  colisiones:0 long.colaTX:1000 
	  Bytes RX:0 (0.0 B)  TX bytes:0 (0.0 B)
	  Interrupción:19 Dirección base: 0xa000 

eth2      Link encap:Ethernet  direcciónHW 00:15:84:2b:6b:8e  
	  Direc. inet:192.168.1.18  Difus.:192.168.1.255  Másc:255.255.255.0
	  Dirección inet6: fe80::215:84ff:fe2b:6b8e/64 Alcance:Enlace
	  ACTIVO DIFUSIÓN FUNCIONANDO MULTICAST  MTU:1500  Métrica:1
	  Paquetes RX:632042 errores:0 perdidos:0 overruns:0 frame:0
	  Paquetes TX:647823 errores:0 perdidos:0 overruns:0 carrier:0
	  colisiones:0 long.colaTX:1000 
	  Bytes RX:207733278 (207.7 MB)  TX bytes:291419413 (291.4 MB)
	  Interrupción:18 Dirección base: 0xc800 

lo        Link encap:Bucle local  
	  Direc. inet:127.0.0.1  Másc:255.0.0.0
	  Dirección inet6: ::1/128 Alcance:Anfitrión
	  ACTIVO BUCLE FUNCIONANDO  MTU:16436  Métrica:1
	  Paquetes RX:186169 errores:0 perdidos:0 overruns:0 frame:0
	  Paquetes TX:186169 errores:0 perdidos:0 overruns:0 carrier:0
	  colisiones:0 long.colaTX:0 
	  Bytes RX:37061384 (37.0 MB)  TX bytes:37061384 (37.0 MB)
</pre>

<p>
En este caso contamos con <code>eth0</code>, <code>eth2</code> y <code>lo</code> que es la interfaz local.
Como se puede ver, la <code>eth2</code> tiene la dirección <b>IP</b> <code>192.168.1.18</code>.
</p>

<p>
Si quisieramos ver las <b>IPs</b> y los números de puertos en lugar de
los nombres de dominio y servicios asociados, debemos usar el
parámetro <code>-n</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo tcpdump -i eth2 -n
</pre>
</div>

<p>
Ahora se reemplaza <code>osiale.gcoop.com.ar</code> por <code>192.168.1.18</code>,
<code>ssh</code> por <code>22</code>, <code>domain</code> por <code>53</code> y <code>malbec</code> por <code>192.168.1.1</code>:
</p>

<pre class="example">
10:09:54.261674 IP 192.168.1.1.22 &gt; 192.168.1.18.49322: Flags [P.], seq 2750542384:2750543808, ack 4116367059, win 1331, options [nop,nop,TS val 20388916 ecr 20607900], length 1424
10:09:54.261748 IP 192.168.1.18.49322 &gt; 192.168.1.1.22: Flags [.], ack 1424, win 1321, options [nop,nop,TS val 20607950 ecr 20388916], length 0
10:09:54.263027 IP 192.168.1.18.46685 &gt; 192.168.1.1.53: 7023+ PTR? 18.1.168.192.in-addr.arpa. (45)
10:09:54.263195 IP 192.168.1.1.53 &gt; 192.168.1.18.46685: 7023* 1/0/0 PTR 192.168.1.18. (78)
10:09:54.540654 IP 192.168.1.1.22 &gt; 192.168.1.18.49322: Flags [P.], seq 1424:2512, ack 1, win 1331, options [nop,nop,TS val 20388986 ecr 20607950], length 1088
10:09:54.540690 IP 192.168.1.18.49322 &gt; 192.168.1.1.22: Flags [.], ack 2512, win 1321, options [nop,nop,TS val 20608019 ecr 20388986], length 0
10:09:54.606095 IP 192.168.1.18.48150 &gt; 192.168.1.1.53: 29621+ A? daisy.ubuntu.com. (34)
10:09:54.606229 IP 192.168.1.1.53 &gt; 192.168.1.18.48150: 29621 2/0/0 A 91.189.95.55, A 91.189.95.54 (66)
10:09:54.785237 IP 192.168.1.1.22 &gt; 192.168.1.18.49322: Flags [.], seq 2512:3960, ack 1, win 1331, options [nop,nop,TS val 20389047 ecr 20608019], length 1448
10:09:54.785281 IP 192.168.1.18.49322 &gt; 192.168.1.1.22: Flags [.], ack 3960, win 1321, options [nop,nop,TS val 20608081 ecr 20389047], length 0
</pre>

<p>
El tráfico de red que capturamos depende mucho de en que lugar de
la red estamos parados, no es lo mismo hacerlo desde un punto
terminal que hacerlo entre un <b>router</b> y un <b>switch</b> o desde
el <b>gateway</b> de salida a internet de toda la red. En los puntos
donde se concentran todas conexiones vamos va ver el tráfico de
más máquinas, es decir más personas!
</p>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3">mirando en profundidad</h3>
<div class="outline-text-3" id="text-10-3">
<p>
Es posible el contenido de los paquetes en formato ASCII mediante
el parámetro <code>-A</code>, indicar la cantidad de paquetes a capturar con
<code>-c</code> y aplicar filtros, como por ejemplo que solo nos interesar
capturar el tráfico que enviamos a los sitios web, o sea filtrar
por puerto de destino <code>80</code>.
</p>

<p>
La sentencia sería la siguiente:
</p>

<div class="org-src-container">

<pre class="src src-sh">tcpdump -i eth2 -n -A -c 1 dst port 80
</pre>
</div>

<p>
En este caso logramos capturar la consulta al sitio <code>osiux.com</code>
que corresponde a la <b>IP</b> <code>67.208.113.123</code> y puerto <code>80</code>, para
esto se está usando un <code>Firefox</code> versión <code>15.0.1</code> en una máquina
con <code>Ubuntu</code> y el idioma preferido es <code>es_ar</code> (Español,
Argentina).
</p>

<p>
En este caso, el que realiza la consulta es la <b>IP</b>
<code>192.168.1.18</code> desde el puerto <code>57935</code>.
</p>

<pre class="example">
10:49:31.622425 IP 192.168.1.18.57935 &gt; 67.208.113.123.80: Flags [P.], seq 3592177738:3592178048, ack 4115460638, win 457, options [nop,nop,TS val 21202290 ecr 455625744], length 310
E..j..@.@.....
.C.q{.O.P..HJ.L............
.C.r.(L.GET / HTTP/1.1
Host: osiux.com
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-ar,es;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
</pre>

<p>
Es muchísima información la que se puede obtener con observar un
sólo paquete de red!
</p>

<p>
Entonces podemos saber:
</p>

<ul class="org-ul">
<li>qué sitios se visitan
</li>
<li>quiénes los miran
</li>
<li>qué escriben
</li>
<li>qué leen
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4">y si chateamos?</h3>
<div class="outline-text-3" id="text-10-4">
<p>
Probemos que sucede si chateamos en la red local, sin salir a
Internet. Para esto, usamos <b>Pidgin</b>, un programa que soporta
casi todos los protocolos y servicios de chat existentes.
</p>

<p>
Primero instalamos <b>Pidgin</b>:
</p>

<pre class="example">
sudo apt-get install pidgin
</pre>

<p>
Luego lo iniciamos, escribiendo <code>pidgin</code> en una terminal o lo
buscamos en el menú de la interfaz gráfica, debería estar
en <b>Aplicaciones-&gt;Internet-&gt;Pidgin</b>
</p>

<p>
Al iniciar, nos solicita <b>añadir</b> una cuenta, elegimos el
protocolo <b>Bonjour</b> e ingresamos nuestro <b>Nombre</b> y <b>Apodo</b>, para
finalizar presionamos <b>Aceptar</b> y luego <b>Cerrar</b>.
</p>

<p>
Listo, ahora vamos a poder chatear con todos aquellos que en la
red local, tengan instalando un programa que soporte el protocolo
<b>Bonjour</b>, también conocido como <b>IChat</b> o <b>Avahi</b>.
</p>

<p>
Comenzamos a chatear con nuestros amigos y al mismo tiempo
ejecutamos <code>tcpdump</code> filtrando por el puerto <code>5298</code>
</p>

<div class="org-src-container">

<pre class="src src-sh">tcpdump -i eth2 -n -A -c5 port 5298
</pre>
</div>

<p>
El resultado de capturar 5 paquetes es:
</p>

<pre class="example">
11:15:55.330043 IP6 fe80::215:84ff:fe2b:6b8e.51378 &gt; fe80::3e07:54ff:fe55:62d4.5298: Flags [P.], seq 31812643:31812912, ack 3913411495, win 551, options [nop,nop,TS val 21598217 ecr 29125604], length 269
`....-.@.............&lt;Z.........&gt;.T..Ub.......l#.A.....'.U.....
.I.	..k.&lt;message to='Leito@zapata' from='osiris@osiale' type='chat'&gt;&lt;body&gt;bien, escribiendo el curso de ayer&lt;/body&gt;&lt;html xmlns='http://www.w3.org/1999/xhtml'&gt;&lt;body&gt;&lt;font&gt;bien, escribiendo el curso de ayer&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;/message&gt;
11:15:55.330428 IP6 fe80::3e07:54ff:fe55:62d4.5298 &gt; fe80::215:84ff:fe2b:6b8e.51378: Flags [.], ack 269, win 274, options [nop,nop,TS val 29130803 ecr 21598217], length 0
`.... .@........&gt;.T..Ub..............&lt;Z......A....m0....n......
...3.I.	
11:16:05.557354 IP6 fe80::215:84ff:fe2b:6b8e.51378 &gt; fe80::3e07:54ff:fe55:62d4.5298: Flags [P.], seq 269:554, ack 1, win 551, options [nop,nop,TS val 21600774 ecr 29130803], length 285
`....=...............&lt;Z.........&gt;.T..Ub.......m0.A.....'.e.....
.I.....3&lt;message to='Leito@zapata' from='osiris@osiale' type='chat'&gt;&lt;body&gt;y necesito capturar el tr..fico de Bonjour&lt;/body&gt;&lt;html xmlns='http://www.w3.org/1999/xhtml'&gt;&lt;body&gt;&lt;font&gt;y necesito capturar el tr..fico de Bonjour&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;/message&gt;
11:16:05.557715 IP6 fe80::3e07:54ff:fe55:62d4.5298 &gt; fe80::215:84ff:fe2b:6b8e.51378: Flags [.], ack 554, win 291, options [nop,nop,TS val 29133360 ecr 21600774], length 0
`.... ..........&gt;.T..Ub..............&lt;Z......A....nM...#Y......
...0.I..
11:16:07.356720 IP6 fe80::215:84ff:fe2b:6b8e.51378 &gt; fe80::3e07:54ff:fe55:62d4.5298: Flags [P.], seq 554:761, ack 1, win 551, options [nop,nop,TS val 21601223 ecr 29133360], length 207
`....................&lt;Z.........&gt;.T..Ub.......nM.A.....'.......
.I.....0&lt;message to='Leito@zapata' from='osiris@osiale' type='chat'&gt;&lt;body&gt;:-P&lt;/body&gt;&lt;html xmlns='http://www.w3.org/1999/xhtml'&gt;&lt;body&gt;&lt;font&gt;:-P&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;&lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;&lt;/message&gt;
</pre>

<p>
Si miramos el primer paquete ignorando los caracteres especiales,
se puede ver que el mensaje es para <b>Leito</b> desde la
máquina <b>zapata</b> y lo envía <b>osiris</b> desde la máquina <b>osiale</b> y
el cuerpo del mensaje se encuentra entre las <b>etiquetas</b> <code>&lt;body&gt;</code>
y <code>&lt;/body&gt;</code>.
</p>

<pre class="example">
&lt;message to='Leito@zapata' from='osiris@osiale' type='chat'&gt;
  &lt;body&gt;bien, escribiendo el curso de ayer&lt;/body&gt;
  &lt;html xmlns='http://www.w3.org/1999/xhtml'&gt;
  &lt;body&gt;
&lt;font&gt;bien, escribiendo el curso de ayer&lt;/font&gt;
  &lt;/body&gt;
  &lt;/html&gt;
  &lt;x xmlns='jabber:x:event'&gt;&lt;composing/&gt;&lt;/x&gt;
&lt;/message&gt;
</pre>

<p>
Entonces, quiere decir que tanto lo que navegamos como lo que
chateamos puede ser interceptado y leído por cualquiera en la
red, solo basta usar <code>tcpdump</code>.
</p>
</div>
</div>

<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5">el fin de la privacidad?</h3>
<div class="outline-text-3" id="text-10-5">
<p>
Cualquier <b>sniffer</b> como <code>tcpdump</code> puede capturar todo el tráfico
de la red y hasta se podría modificar el contenido de los
paquetes que viajan a través de la red sin que nos demos cuenta.
</p>

<p>
Y entonces, cómo hacemos para tener algo de privacidad?
</p>

<p>
La respuesta es <b>no enviar mensajes en texto plano</b>, para esto lo
mejor es <b>cifrar todos los mensajes</b>, hay varios protocolos que
envían y reciben todos los datos de manera cifrada.
</p>

<p>
En el caso de los sitios webs es posible acceder por <b>HTTPS</b> en
lugar de <b>HTTP</b>, por ejemplo, en lugar de ir a
<code>http://google.com</code> podemos acceder a
<code>https://encrypted.google.com/</code> y asi todo lo que enviemos
a <b>google</b> irá cifrado y aunque alguien capture ese tráfico de
red, <b>no podrá entenderlo</b>, aunque no evitaremos que sepan que
estamos ingresando al sitio <b>google.com</b>.
</p>

<p>
Tener que tipear <b>https</b> en lugar de <b>http</b> todo el tiempo no es
algo cómodo y además la mayoría de las páginas web hacen enlaces
a los sitios usando <b>http</b>. La solución a este problema es
instalar un <b>plugin</b> en el navegador, por ejemplo para <b>Firefox</b>
existe <b>HTTPSEveryWhere</b>, que hace esto por nosotros y soporta
una gran lista de sitios webs, obviamente los más usados.
</p>

<p>
Para instalarlo, acceder a: 
<a href="https://www.eff.org/https-everywhere-node">https://www.eff.org/https-everywhere-node</a>
</p>

<p>
También existen otras alternativas como usar un <b>túnel SSH</b>.
Siempre que dispongamos de una máquina remota con GNU/Linux
conectada a internet (en nuestra casa, por ejemplo) podríamos
usarla para cifrar nuestra conexión y lograr (por lo menos) que
en la red local, en la que estamos actualmente nadie pueda ver lo
que hacemos.
</p>

<p>
Para esto, podemos hacer lo siguiente:
</p>

<pre class="example">
ssh -fN -D 9090 osiris@osiux.com
</pre>

<p>
De esta manera, de ahora en más vamos a tener un <b>Proxy SOCKS</b>
corriendo en el puerto <code>9090</code>, sólo bastaría decirle a todas las
aplicaciones que usan la red, que no se conecten directamente,
sino que utilicen <code>localhost:9090</code> como servidor <b>Proxy</b>.
</p>

<p>
En <b>Firefox</b> ir a <b>Editar-&gt;Preferencias-&gt;Avanzadas-&gt;Red-&gt;Configuración</b>
</p>

<p>
Ahí seleccionamos <b>Configuración manual de proxy</b> e ingresamos
en <b>Servidor proxy SOCKS</b> la dirección <b>localhost y el puerto
9090</b>, presionamos <b>Aceptar</b>, y listo, ya podemos navegar
tranquilos.
</p>

<p>
En realidad, sólo estamos cifrando un tramo de la conexión, desde
la máquina en donde estamos hasta la máquina remota, desde esta
última el tráfico viajará sin el cifrado de <b>SSH</b>.
</p>
</div>
</div>

<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6">por las dudas yo guardo el tráfico de red ;-)</h3>
<div class="outline-text-3" id="text-10-6">
<p>
Podemos decirle a <code>tcpdump</code> que en lugar de mostrarnos el tráfico
de red, lo guarde en un archivo, para luego analizarlo en
profundidad. También se utiliza para hacer monitoreo remoto o
buscar la causa de algún problema en la red, detectar alguna
intrusión no autorizada, hacer auditorías, etc.
</p>

<p>
Mediante <code>-s 0</code> indicamos que capture el paquete completo y con
<code>-w</code> se especifica el archivo donde se guarda el tráfico.
</p>

<pre class="example">
sudo tcpdump -i eth2 -n -s 0 -w porlasdudas.pcap
</pre>

<p>
Existen muchas herramientas que leen archivos <code>.pcap</code>, una de
ellas es <b>Wireshark</b>, que es un analizador de protocolos muy
completo y que además posee interfaz gráfica.
</p>

<p>
Lo instalamos:
</p>

<pre class="example">
apt-get install wireshark
</pre>

<p>
Podemos indicar a <b>WireShark</b> que inicie leyendo el archivo:
</p>

<pre class="example">
wireshark -r porlasdudas.pcap
</pre>

<p>
También se puede iniciar desde el menú <b>Aplicaciones-&gt;Internet-&gt;Wireshark</b>
</p>

<p>
Una vez iniciado, se puede apreciar que la pantalla está dividida
en tres partes, que serían:
</p>

<ul class="org-ul">
<li>el listado de paquetes
</li>
<li>panel de detalles del paquete seleccionado
</li>
<li>panel de bytes del paquete seleccionado
</li>
</ul>

<p>
Es bastante intuitivo y muy interesante para los curiosos! :-D
</p>
</div>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7">no entendí nada! :-(</h3>
<div class="outline-text-3" id="text-10-7">
<p>
El análisis de tráfico de red, requiere de ciertos conocimientos
básicos de redes, sobre el modelo <b>OSI</b> y el modelo <b>TCP/IP</b>,
saber sobre <b>DNS</b>, <b>ARP</b> y otras tantas cosas como los <b>RFC</b>,
pero a no desesperar, leer aunque sea muy por arriba los
siguiente links:
</p>

<ul class="org-ul">
<li><a href="https://es.wikipedia.org/wiki/Modelo_osi">https://es.wikipedia.org/wiki/Modelo_osi</a>
</li>
<li><a href="https://es.wikipedia.org/wiki/Modelo_TCP/IP">https://es.wikipedia.org/wiki/Modelo_TCP/IP</a>
</li>
</ul>

<p>
La próxima entrega veremos en un lenguaje muy simple y claro, lo
básico de cómo funcionan las redes y sobre todo cómo interactúan
los distintos elementos que la componen.
</p>

<p>
La idea de usar <b>tcpdump</b> era volverlos un poquito paranoicos,
ahora saben que es muy probable que alguien en algún punto de la
red, esté mirando (y hasta guardando) todos los datos que
enviamos y recibimos, aunque sólo se trate del <i>Administrador de la Red</i>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Introducción a las redes TCP/IP</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1">Topología, redes y Subredes</h3>
<div class="outline-text-3" id="text-11-1">
<ul class="org-ul">
<li>centralizada


<div class="figure">
<p><img src="img/redes-centralizadas.png" alt="redes-centralizadas.png" />
</p>
</div>
</li>

<li>descentralizada


<div class="figure">
<p><img src="img/redes-descentralizadas.png" alt="redes-descentralizadas.png" />
</p>
</div>
</li>

<li>en malla o <i>mesh</i>


<div class="figure">
<p><img src="img/redes-mesh.png" alt="redes-mesh.png" />
</p>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2">Asignación de IPs por medio de DHCP</h3>
<div class="outline-text-3" id="text-11-2">
<ul class="org-ul">
<li>DHCP server
</li>
<li>DHCP client
</li>
</ul>
</div>

<div id="outline-container-sec-11-2-1" class="outline-4">
<h4 id="sec-11-2-1">Red de 4 equipos</h4>
<div class="outline-text-4" id="text-11-2-1">

<div class="figure">
<p><img src="img/redes-lan.png" alt="redes-lan.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-2-2" class="outline-4">
<h4 id="sec-11-2-2"><code>B</code> dice, <b>necesito una IP!</b></h4>
<div class="outline-text-4" id="text-11-2-2">
<ul class="org-ul">
<li>mensaje: <code>DHCPDISCOVER</code>
</li>
<li>protocolo: UDP
</li>
<li>puerto destino: 67
</li>
<li>dirección física: 01:12:23:34:45:bb
</li>
</ul>


<div class="figure">
<p><img src="img/redes-dhcp-discover.png" alt="redes-dhcp-discover.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-2-3" class="outline-4">
<h4 id="sec-11-2-3"><code>D</code> dice, <b>yo te puedo dar IP!</b></h4>
<div class="outline-text-4" id="text-11-2-3">
<ul class="org-ul">
<li>mensaje: <code>DHCPOFFER</code>
</li>
<li>dirección física: 01:12:23:34:45:dd
</li>
<li>dirección IP: 192.168.10.102
</li>
<li>gateway: 192.168.10.1
</li>
<li>dns primario: 8.8.8.8
</li>
<li>dns secundario: 8.8.4.4
</li>
</ul>


<div class="figure">
<p><img src="img/redes-dhcp-offer.png" alt="redes-dhcp-offer.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-2-4" class="outline-4">
<h4 id="sec-11-2-4"><code>B</code> dice, confirmo recepción!</h4>
<div class="outline-text-4" id="text-11-2-4">
<ul class="org-ul">
<li>mensaje: <code>DHCPREQUEST</code>
</li>
</ul>


<div class="figure">
<p><img src="img/redes-dhcp-request.png" alt="redes-dhcp-request.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-2-5" class="outline-4">
<h4 id="sec-11-2-5"><code>D</code> dice, confirmo confirmación!</h4>
<div class="outline-text-4" id="text-11-2-5">
<ul class="org-ul">
<li>mensaje: <code>DHCPACK</code>
</li>
</ul>


<div class="figure">
<p><img src="img/redes-dhcp-ack.png" alt="redes-dhcp-ack.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3">Resolución de nombres de dominios DNS</h3>
<div class="outline-text-3" id="text-11-3">
<div class="org-src-container">

<pre class="src src-sh">host localhost
</pre>
</div>

<pre class="example">
localhost.gcoop.com.ar has address 127.0.0.1
</pre>

<div class="org-src-container">

<pre class="src src-sh">dig osiux.com
</pre>
</div>

<pre class="example">
; &lt;&lt;&gt;&gt; DiG 9.8.4-rpz2+rl005.12-P1 &lt;&lt;&gt;&gt; osiux.com
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 12452
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;osiux.com.			IN	A

;; ANSWER SECTION:
osiux.com.		3600	IN	A	96.8.118.129

;; Query time: 544 msec
;; SERVER: 192.168.10.3#53(192.168.10.3)
;; WHEN: Tue Aug 12 18:41:10 2014
;; MSG SIZE  rcvd: 43
</pre>
</div>

<div id="outline-container-sec-11-3-1" class="outline-4">
<h4 id="sec-11-3-1">viendo un paquete de query dns</h4>
<div class="outline-text-4" id="text-11-3-1">
<div class="org-src-container">

<pre class="src src-sh">tcpdump -r dns-query.pcap -nvX
</pre>
</div>

<pre class="example">
02:14:20.301428 IP (tos 0x0, ttl 64, id 27874, offset 0, flags [none], proto UDP (17), length 55)
    127.0.0.1.57039 &gt; 127.0.0.1.53: 39172+ A? osiux.com. (27)
    0x0000:  4500 0037 6ce2 0000 4011 0fd2 7f00 0001  E..7l...@.......
    0x0010:  7f00 0001 decf 0035 0023 fe36 9904 0100  .......5.#.6....
    0x0020:  0001 0000 0000 0000 056f 7369 7578 0363  .........osiux.c
    0x0030:  6f6d 0000 0100 01                        om.....
</pre>
</div>
</div>

<div id="outline-container-sec-11-3-2" class="outline-4">
<h4 id="sec-11-3-2">analizando un paquete de query dns</h4>
<div class="outline-text-4" id="text-11-3-2">
<div class="org-src-container">

<pre class="src src-sh">tshark -r dns-query.pcap -VO dns
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-3-3" class="outline-4">
<h4 id="sec-11-3-3">capturar consultas al dns</h4>
<div class="outline-text-4" id="text-11-3-3">
<pre class="example">
ssh root@linksys '/usr/sbin/tcpdump -i br0 -s 0 -w - dst port 53' &gt;linksys.pcap
</pre>
</div>
</div>

<div id="outline-container-sec-11-3-4" class="outline-4">
<h4 id="sec-11-3-4">ranking de dns</h4>
<div class="outline-text-4" id="text-11-3-4">
<pre class="example">
tcpdump -r linksys.pcap -c 2000 -nnnA dst port 53 | \
egrep -o "A+\? .*\." | sed s/".$"//g | awk '{print $2}' | \
egrep -v "(osiux|fbcdn|akamai)" | sort | uniq -c | sort -nr | head
</pre>

<table id="ranking-dns" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="right">47</td>
<td class="left">www.facebook.com</td>
</tr>

<tr>
<td class="right">42</td>
<td class="left">dns.msftncsi.com</td>
</tr>

<tr>
<td class="right">41</td>
<td class="left">su.ff.avast.com</td>
</tr>

<tr>
<td class="right">37</td>
<td class="left">ssl.google-analytics.com</td>
</tr>

<tr>
<td class="right">37</td>
<td class="left">ipv6.msftncsi.com</td>
</tr>

<tr>
<td class="right">32</td>
<td class="left">www.habbo.es</td>
</tr>

<tr>
<td class="right">26</td>
<td class="left">imap.googlemail.com</td>
</tr>

<tr>
<td class="right">21</td>
<td class="left">dynamic.zoneedit.com</td>
</tr>

<tr>
<td class="right">19</td>
<td class="left">www.msftncsi.com</td>
</tr>

<tr>
<td class="right">18</td>
<td class="left">kiwwwi.com.ar</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4">Sniffers nmap, dsniff</h3>
<div class="outline-text-3" id="text-11-4">
</div><div id="outline-container-sec-11-4-1" class="outline-4">
<h4 id="sec-11-4-1">nmap</h4>
<div class="outline-text-4" id="text-11-4-1">
<div class="org-src-container">

<pre class="src src-sh">nmap -sV --open 192.168.10.0/24 -p22 | head
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5">Túneles y Redes Privadas Virtuales VPN</h3>
<div class="outline-text-3" id="text-11-5">
</div><div id="outline-container-sec-11-5-1" class="outline-4">
<h4 id="sec-11-5-1">Redireccionar puertos con <code>ssh</code></h4>
<div class="outline-text-4" id="text-11-5-1">
<pre class="example">
ssh -L 2525:localhost:25 osiux.com
</pre>
</div>
</div>

<div id="outline-container-sec-11-5-2" class="outline-4">
<h4 id="sec-11-5-2">Proxy Socks mediante ssh</h4>
<div class="outline-text-4" id="text-11-5-2">
<pre class="example">
ssh -D 9090 osiux.com
</pre>
</div>
</div>

<div id="outline-container-sec-11-5-3" class="outline-4">
<h4 id="sec-11-5-3">Tunel reverso con ssh</h4>
<div class="outline-text-4" id="text-11-5-3">
<pre class="example">
ssh -R 12345:localhost:22 osiux.com
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-6" class="outline-3">
<h3 id="sec-11-6">Cómo saber la IP de un equipo?</h3>
<div class="outline-text-3" id="text-11-6">
</div><div id="outline-container-sec-11-6-1" class="outline-4">
<h4 id="sec-11-6-1">B dice, <b>cuál es la IP de D?</b></h4>
<div class="outline-text-4" id="text-11-6-1">
<ul class="org-ul">
<li>Se que D es <b>00:14:d1:18:4a:dd</b>
</li>
<li>Yo soy B y mi mac es <b>00:14:d1:18:4a:bb</b>
</li>
<li>Todos reciben paquete ARP por difusión
</li>
</ul>


<div class="figure">
<p><img src="img/redes-arp-1.png" alt="redes-arp-1.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-6-2" class="outline-4">
<h4 id="sec-11-6-2">D contesta, <b>mi IP es 10.4.14.225</b></h4>
<div class="outline-text-4" id="text-11-6-2">

<div class="figure">
<p><img src="img/redes-arp-2.png" alt="redes-arp-2.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11-6-3" class="outline-4">
<h4 id="sec-11-6-3">Quénes están en esta red?</h4>
<div class="outline-text-4" id="text-11-6-3">
<div class="org-src-container">

<pre class="src src-sh">sudo arp-scan --interface eth0 --localnet
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-6-4" class="outline-4">
<h4 id="sec-11-6-4">pingueando</h4>
<div class="outline-text-4" id="text-11-6-4">
<div class="org-src-container">

<pre class="src src-sh">ping -c 5 127.0.0.1
</pre>
</div>

<pre class="example">
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_req=1 ttl=64 time=0.042 ms
64 bytes from 127.0.0.1: icmp_req=2 ttl=64 time=0.042 ms
64 bytes from 127.0.0.1: icmp_req=3 ttl=64 time=0.042 ms
64 bytes from 127.0.0.1: icmp_req=4 ttl=64 time=0.040 ms
64 bytes from 127.0.0.1: icmp_req=5 ttl=64 time=0.068 ms

--- 127.0.0.1 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 3999ms
rtt min/avg/max/mdev = 0.040/0.046/0.068/0.013 ms
</pre>
</div>
</div>

<div id="outline-container-sec-11-6-5" class="outline-4">
<h4 id="sec-11-6-5">capturando pings</h4>
<div class="outline-text-4" id="text-11-6-5">
<pre class="example">
sudo tcpdump -i lo -nnnt -c 5 icmp
</pre>
</div>
</div>

<div id="outline-container-sec-11-6-6" class="outline-4">
<h4 id="sec-11-6-6">viendo un <code>ping</code></h4>
<div class="outline-text-4" id="text-11-6-6">
<pre class="example">
sudo tcpdump -i lo -nnntvvX -c 1 -e icmp
</pre>

<pre class="example">
00:00:00:00:00:00 &gt; 00:00:00:00:00:00, ethertype IPv4 (0x0800), length 98: (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto ICMP (1), length 84)
    127.0.0.1 &gt; 127.0.0.1: ICMP echo request, id 4177, seq 329, length 64
  0x0000:  4500 0054 0000 4000 4001 3ca7 7f00 0001  E..T..@.@.&lt;.....
  0x0010:  7f00 0001 0800 a68d 1051 0149 e754 5e51  .........Q.I.T^Q
  0x0020:  022f 0d00 0809 0a0b 0c0d 0e0f 1011 1213  ./..............
  0x0030:  1415 1617 1819 1a1b 1c1d 1e1f 2021 2223  .............!"#
  0x0040:  2425 2627 2829 2a2b 2c2d 2e2f 3031 3233  $%&amp;'()*+,-./0123
  0x0050:  3435 3637                                4567
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-7" class="outline-3">
<h3 id="sec-11-7">traceroute</h3>
<div class="outline-text-3" id="text-11-7">
<div class="org-src-container">

<pre class="src src-sh">traceroute -m 100 216.81.59.173
</pre>
</div>

<pre class="example">
traceroute to 216.81.59.173 (216.81.59.173), 100 hops max, 60 byte packets
 1  malbec (192.168.10.3)  0.144 ms  0.090 ms  0.086 ms
 2  10.0.0.2 (10.0.0.2)  0.589 ms  0.752 ms  0.932 ms
 3  host41.190-225-250.telecom.net.ar (190.225.250.41)  27.979 ms  29.368 ms  29.397 ms
 4  host234.200-3-37.telecom.net.ar (200.3.37.234)  168.310 ms  171.861 ms  172.039 ms
 5  nota.he.net (198.32.124.176)  171.649 ms  172.885 ms  174.808 ms
 6  10ge1-1.core1.atl1.he.net (72.52.92.53)  190.439 ms  190.694 ms  205.705 ms
 7  216.66.0.26 (216.66.0.26)  188.601 ms  188.633 ms  190.360 ms
 8  10.26.26.22 (10.26.26.22)  236.007 ms  218.571 ms  219.624 ms
 9  Episode.IV (206.214.251.1)  219.389 ms  216.643 ms  216.767 ms
10  A.NEW.HOPE (206.214.251.6)  214.426 ms  215.692 ms  216.686 ms
11  It.is.a.period.of.civil.war (206.214.251.9)  225.766 ms  227.148 ms  228.531 ms
12  Rebel.spaceships (206.214.251.14)  230.010 ms  230.939 ms  232.337 ms
13  striking.from.a.hidden.base (206.214.251.17)  213.423 ms  214.658 ms  217.078 ms
14  have.won.their.first.victory (206.214.251.22)  225.137 ms  224.143 ms  226.268 ms
15  against.the.evil.Galactic.Empire (206.214.251.25)  216.287 ms  217.581 ms  221.466 ms
16  During.the.battle (206.214.251.30)  218.038 ms  220.430 ms  221.568 ms
17  Rebel.spies.managed (206.214.251.33)  227.996 ms  229.379 ms  231.048 ms
18  to.steal.secret.plans (206.214.251.38)  230.317 ms  217.911 ms  220.650 ms
19  to.the.Empires.ultimate.weapon (206.214.251.41)  219.187 ms  220.072 ms  221.487 ms
20  the.DEATH.STAR (206.214.251.46)  227.899 ms  219.453 ms  222.629 ms
21  an.armored.space.station (206.214.251.49)  219.284 ms  220.069 ms  221.977 ms
22  with.enough.power.to (206.214.251.54)  223.234 ms  224.366 ms  225.311 ms
23  destroy.an.entire.planet (206.214.251.57)  225.790 ms  226.446 ms  219.245 ms
24  Pursued.by.the.Empires (206.214.251.62)  220.167 ms  221.524 ms  222.474 ms
25  sinister.agents (206.214.251.65)  225.680 ms  226.590 ms  214.636 ms
26  Princess.Leia.races.home (206.214.251.70)  217.965 ms  216.966 ms  219.848 ms
27  aboard.her.starship (206.214.251.73)  224.237 ms  227.173 ms  229.580 ms
28  custodian.of.the.stolen.plans (206.214.251.78)  228.552 ms  230.736 ms  232.391 ms
29  that.can.save.her (206.214.251.81)  216.781 ms  217.668 ms  220.048 ms
30  people.and.restore (206.214.251.86)  223.274 ms  225.621 ms  226.548 ms
31  freedom.to.the.galaxy (206.214.251.89)  243.602 ms  245.496 ms  245.970 ms
32  0-----I-------I-----0 (206.214.251.94)  223.606 ms  226.405 ms  227.812 ms
33  0------------------0 (206.214.251.97)  248.469 ms  247.234 ms  249.385 ms
34  0-----------------0 (206.214.251.102)  229.215 ms  217.496 ms  219.087 ms
35  0----------------0 (206.214.251.105)  218.622 ms  219.943 ms  220.875 ms
36  0---------------0 (206.214.251.110)  222.846 ms  215.481 ms  216.567 ms
37  0--------------0 (206.214.251.113)  218.058 ms  219.424 ms  221.079 ms
38  0-------------0 (206.214.251.118)  222.354 ms  223.956 ms  225.880 ms
39  0------------0 (206.214.251.121)  228.327 ms  229.480 ms  215.836 ms
40  0-----------0 (206.214.251.126)  222.104 ms  221.118 ms  222.976 ms
41  0----------0 (206.214.251.129)  222.448 ms  223.338 ms  215.678 ms
42  0---------0 (206.214.251.134)  218.077 ms  220.436 ms  222.833 ms
43  0--------0 (206.214.251.137)  229.670 ms  227.473 ms  230.338 ms
44  0-------0 (206.214.251.142)  227.891 ms  228.819 ms  229.713 ms
45  0------0 (206.214.251.145)  220.543 ms  222.293 ms  225.694 ms
46  0-----0 (206.214.251.150)  220.757 ms  223.588 ms  224.506 ms
47  0----0 (206.214.251.153)  220.133 ms  222.450 ms  225.360 ms
48  0---0 (206.214.251.158)  226.351 ms  230.920 ms  227.975 ms
49  0--0 (206.214.251.161)  231.845 ms  233.230 ms  235.152 ms
50  0-0 (206.214.251.166)  233.676 ms  221.061 ms  221.999 ms
51  00 (206.214.251.169)  224.952 ms *  228.301 ms
52  I (206.214.251.174)  225.581 ms  219.192 ms  220.017 ms
53  By.Ryan.Werber (206.214.251.177)  221.936 ms  220.493 ms  224.321 ms
54  Blizzards.Breed.CCIE.Creativity (206.214.251.182)  227.709 ms  226.259 ms  228.895 ms
55  Please.Try.Again.Tracerote.to.obiwan.scrye.net (206.214.251.185)  228.134 ms  230.003 ms  216.296 ms
56  read.more.at.beaglenetworks.net (206.214.251.190)  222.193 ms * *
</pre>

<div class="org-src-container">

<pre class="src src-sh">traceroute -m 255 obiwan.scrye.net|awk {<span style="color: #ad7fa8; font-style: italic;">'print $2'</span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-8" class="outline-3">
<h3 id="sec-11-8">protocolos</h3>
<div class="outline-text-3" id="text-11-8">

<div class="figure">
<p><img src="img/redes-protocolos-1.png" alt="redes-protocolos-1.png" />
</p>
</div>


<div class="figure">
<p><img src="img/redes-protocolos-2.png" alt="redes-protocolos-2.png" />
</p>
</div>
</div>

<div id="outline-container-sec-11-8-1" class="outline-4">
<h4 id="sec-11-8-1">Qué tiene un paquete TCP/IP?</h4>
<div class="outline-text-4" id="text-11-8-1">
<pre class="example">
+------------------------+--------------------------+
| MAC origen fe:ca:fe:ca | MAC destino  ca:fe:ca:fe |
+------------------------+--------------------------+
| IP origen 192.168.1.22 | IP destino  96.8.118.129 |
+---------------------------------------------------+
| Puerto origen    45678 | Puerto destino: 80       |
+------------------------+--------------------------+
| Nro Secuencia    12345 | Nro ACK                  |
+---+---+---+---+---+----+--------------------------+
| U | A | P | R | S | F | GET / HTTP/1.0            |
| R | C | S | S | Y | I |                           |
| G | K | H | T | N | N |                           |
+---+---+---+---+---+---+---------------------------+
</pre>
</div>
</div>

<div id="outline-container-sec-11-8-2" class="outline-4">
<h4 id="sec-11-8-2">Ethernet header</h4>
<div class="outline-text-4" id="text-11-8-2">
<pre class="example">
|                   |1                  |2                  |3  |
|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Hardware type         |          Protocol type        |
+---------------+---------------+-------------------------------+
|Hw address len.|Pr address len.|             Opcode            |
+---------------+---------------+-------------------------------+
|               Source hardware address                         |
+---------------------------------------------------------------+
|               Source protocol address                         |
+---------------------------------------------------------------+
|               Destination hardware address                    |
+---------------------------------------------------------------+
|               Destination protocol address                    |
+---------------------------------------------------------------+
|                            Data                               |
+---------------------------------------------------------------+
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-9" class="outline-3">
<h3 id="sec-11-9">IP header</h3>
<div class="outline-text-3" id="text-11-9">
<pre class="example">
|                   |1                  |2                  |3  |
|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version|  IHL  | Diff.Services |     Total length              |
+-------+-------+---------------+-----+-------------------------+
|        Identification         |Flags|         Fragment offset |
+---------------+---------------+-----+-------------------------+
|    TTL        | Protocol      | Header checksum               |
+---------------+---------------+-------------------------------+
|                       Source IP address                       |
+---------------------------------------------------------------+
|                  Destination IP address                       |
+---------------------------------------------------------------+
|                     Options and padding                       |
+---------------------------------------------------------------+
</pre>
</div>
</div>

<div id="outline-container-sec-11-10" class="outline-3">
<h3 id="sec-11-10">UPD header</h3>
<div class="outline-text-3" id="text-11-10">
<pre class="example">
|                   |1                  |2                  |3  |
|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |        Destination Port       |
+-------------------------------+-------------------------------+
|          Length               |        Checksum               |
+-------------------------------+-------------------------------+
|                           Data                                |
+---------------------------------------------------------------+
</pre>
</div>
</div>

<div id="outline-container-sec-11-11" class="outline-3">
<h3 id="sec-11-11">TCP header</h3>
<div class="outline-text-3" id="text-11-11">
<pre class="example">
|                   |1                  |2                  |3  |
|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|2|3|4|5|6|7|8|9|0|1|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |        Destination Port       |
+-------------------------------+-------------------------------+
|                        Sequence Number                        |
+-------------------------------+-------------------------------+
|                     Acknowledgment Number                     |
+-------+-----+-----+-+-+-+-+-+-+-------------------------------+
|dOffset|rsrvd| ECN |U|A|P|R|S|F|        Window                 |
|       |     |     |R|C|S|S|Y|I|                               |
|       |     |     |G|K|H|T|N|N|                               |
+-------+-----+-----+-+-+-+-+-+-+-------------------------------+
| Checksum                      | Urgent Pointer                |
+-------------------------------+-------------------------------+
|                      Options and padding                      |
+---------------------------------------------------------------+
|                           Data                                |
+---------------------------------------------------------------+
</pre>
</div>
</div>

<div id="outline-container-sec-11-12" class="outline-3">
<h3 id="sec-11-12">ChangeLog</h3>
<div class="outline-text-3" id="text-11-12">
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2013-06-05 mié]</span></span> simplifico y hago correcciones varias
</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2013-04-09 mar]</span></span> corrijo gráficos ascii-art
</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2013-04-04 jue]</span></span> primer borrador general
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Configuración de servicios básicos</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">Apache</h3>
<div class="outline-text-3" id="text-12-1">
</div><div id="outline-container-sec-12-1-1" class="outline-4">
<h4 id="sec-12-1-1">Instalar Apache</h4>
<div class="outline-text-4" id="text-12-1-1">
<div class="org-src-container">

<pre class="src src-sh">apt-get install apache2-mpm-prefork libapache2-mod-php5
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-1-2" class="outline-4">
<h4 id="sec-12-1-2">Crear un VirtualHost</h4>
<div class="outline-text-4" id="text-12-1-2">
<p>
Primero se debe crear un archivo preferentemente con el nombre
del dominio y ubicarlo en <code>sites-available</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">vi /etc/apache2/sites-available/sitioweb.com
</pre>
</div>

<p>
El contenido debe tener al menos los siguientes parámetros:
</p>

<pre class="example">
&lt;VirtualHost *:80&gt;
        ServerName  sitioweb.com
        ServerAlias www.sitioweb.com
        DocumentRoot /var/www/sitioweb
        &lt;Directory /var/www/&gt;
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        &lt;/Directory&gt;
        ErrorLog /var/log/apache2/error.log
        LogLevel warn
        CustomLog /var/log/apache2/access.log combined
&lt;/VirtualHost&gt;
</pre>

<p>
Luego se debe habilitar el sitio, de la siguiente manera:
</p>

<div class="org-src-container">

<pre class="src src-sh">a2ensite sitioweb.com
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-1-3" class="outline-4">
<h4 id="sec-12-1-3">Iniciar, Detener y Reiniciar Apache</h4>
<div class="outline-text-4" id="text-12-1-3">
<p>
Los cambios en los VirtualHost son aplicados sólo cuando se
reinicia el servicio, es posible hacerlo de dos maneras:
</p>

<div class="org-src-container">

<pre class="src src-sh">/etc/init.d/apache2 start|stop|restart
apache2ctl stop|start|graceful
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2">PHP</h3>
<div class="outline-text-3" id="text-12-2">
</div><div id="outline-container-sec-12-2-1" class="outline-4">
<h4 id="sec-12-2-1">Instalar PHP</h4>
<div class="outline-text-4" id="text-12-2-1">
<div class="org-src-container">

<pre class="src src-sh">apt-get install php5 php-pear php-mail php-doc phpmyadmin libapache2-mod-php5 php5-cli php5-mysql php5-xdebug
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-2-2" class="outline-4">
<h4 id="sec-12-2-2">Configurar PHP</h4>
<div class="outline-text-4" id="text-12-2-2">
<pre class="example">
vi /etc/php5/apache2/php.ini

memory_limit = 128M
error_reporting  =  E_ALL
upload_max_filesize = 20M
</pre>
</div>
</div>

<div id="outline-container-sec-12-2-3" class="outline-4">
<h4 id="sec-12-2-3">Programar PHP</h4>
<div class="outline-text-4" id="text-12-2-3">
<pre class="example">
vi /var/www/contacts_emails.php

&lt;?
    include "DB.php";
    mysql = new DB();
    $dsn = 'mysqli://usuario:secreto@localhost/mibase;
    b = $mysql-&gt;connect($dsn);
    echo '&lt;table bgcolor="gray" border="0" cellspacing="1" cellpadding="1"&gt;';
    $query = "SELECT      c.name, e.email_address from contacts c
              INNER JOIN  contacts_emails ce on ce.contact_id = c.id
              INNER JOIN  emails e on e.id = ce.email_id
              ORDER BY    c.name, e.address;";
    $result = $db-&gt;query($query);
    while($row = $result-&gt;fetchRow (DB_FETCHMODE_ASSOC))
    {
        printf('&lt;tr&gt;
                &lt;td bgcolor="white"&gt;%s&lt;/td&gt;
                &lt;td bgcolor="white"&gt;%s&lt;/td&gt;
               &lt;/tr&gt;',$row['name'],$row['address']);
    }
    echo '&lt;/table&gt;';
?&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3">MySQL</h3>
<div class="outline-text-3" id="text-12-3">
</div><div id="outline-container-sec-12-3-1" class="outline-4">
<h4 id="sec-12-3-1">Crear Base y Usuario</h4>
<div class="outline-text-4" id="text-12-3-1">
<pre class="example">
CREATE DATABASE sugar CHARACTER SET utf8 COLLATE utf8_general_ci;
CREATE user sugar;
GRANT ALL ON sugar.* TO 'sugar'@'%';
SET PASSWORD FOR 'sugar'@'%'=PASSWORD('sugar');
</pre>
</div>
</div>

<div id="outline-container-sec-12-3-2" class="outline-4">
<h4 id="sec-12-3-2">UTF8</h4>
<div class="outline-text-4" id="text-12-3-2">
<p>
Definir UTF8 en el cliente
</p>

<pre class="example">
mysql --default-character-set=utf8
</pre>

<p>
Definir UTF8
</p>

<pre class="example">
SET NAMES utf8; SELECT * FROM contacts;
</pre>
</div>
</div>

<div id="outline-container-sec-12-3-3" class="outline-4">
<h4 id="sec-12-3-3">MySQL de Bash</h4>
<div class="outline-text-4" id="text-12-3-3">
<p>
Definir Alias
</p>

<pre class="example">
set alias sugar = 'mysql --default-character-set=utf8 -u sugar -psugar -B sugar -h localhost '
</pre>

<p>
Ejecutar consulta
</p>

<pre class="example">
echo "SELECT user_name FROM users WHERE is_admin = 1;" | sugar
</pre>

<p>
Listado de Tablas
</p>

<pre class="example">
set alias tablas='echo "show tables" | sugar | grep -v Tables_in | sort -u'
</pre>

<p>
Listado Tabla Campo
</p>

<pre class="example">
set alias tablacampo='echo "show tables" | sugar | grep -v Tables_in | while read t; \
do d=$(echo "desc "$t";" | cct15 | grep -v Field | awk1); \
for c in $d;do echo $t"__"$c;done ;done'
</pre>

<p>
Quitar nombre de campo
</p>

<pre class="example">
mysql -N
</pre>

<p>
Vaciar todas las tablas que contengan la palabra <b>calls</b>
</p>

<pre class="example">
sugar &lt; $(echo "show tables" | sugar | grep calls | while read t;do echo "TRUNCATE table $t;";done)
</pre>
</div>
</div>

<div id="outline-container-sec-12-3-4" class="outline-4">
<h4 id="sec-12-3-4">MySQL desde Vim</h4>
<div class="outline-text-4" id="text-12-3-4">
<p>
Agregar en <code>.vimrc</code>
</p>

<pre class="example">
command -range=% SUGAR :&lt;line1&gt;,&lt;line2&gt;w !mysql -u sugar -psugar -B sugar -t -v -v -v
</pre>

<p>
Ejecutar todo el archivo
</p>

<pre class="example">
:SUGAR
</pre>

<p>
Ejecutar la línea actual
</p>

<pre class="example">
:. SUGAR
</pre>

<p>
Ejecutar un rango de líneas
</p>

<pre class="example">
:3,8 SUGAR
</pre>

<p>
Ejecutar desde línea actual hasta el final
</p>

<pre class="example">
:.,$ SUGAR
</pre>

<p>
Usar diccionarios
</p>

<pre class="example">
:set dictionary=tablas, tablacampo

CTRL-X CTRL-K
</pre>
</div>
</div>

<div id="outline-container-sec-12-3-5" class="outline-4">
<h4 id="sec-12-3-5">Reemplazar Texto</h4>
<div class="outline-text-4" id="text-12-3-5">
</div><div id="outline-container-sec-12-3-5-1" class="outline-5">
<h5 id="sec-12-3-5-1">Traducir valores</h5>
<div class="outline-text-5" id="text-12-3-5-1">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      REPLACE(REPLACE(direction,<span style="color: #ad7fa8; font-style: italic;">'Inbound'</span>,<span style="color: #ad7fa8; font-style: italic;">'Entrante'</span>),<span style="color: #ad7fa8; font-style: italic;">'Outbound'</span>,<span style="color: #ad7fa8; font-style: italic;">'Saliente'</span>) <span style="color: #729fcf; font-weight: bold;">AS</span> direccion
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-5-2" class="outline-5">
<h5 id="sec-12-3-5-2">Actualizar registros</h5>
<div class="outline-text-5" id="text-12-3-5-2">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">UPDATE</span> contacts <span style="color: #729fcf; font-weight: bold;">SET</span> last_name = REPLACE(last_name, <span style="color: #ad7fa8; font-style: italic;">'NUNEZ'</span>, <span style="color: #ad7fa8; font-style: italic;">'NU&#209;EZ'</span>);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-6" class="outline-4">
<h4 id="sec-12-3-6">Buscar duplicados</h4>
<div class="outline-text-4" id="text-12-3-6">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      last_name, first_name, <span style="color: #729fcf;">COUNT</span>(id) <span style="color: #729fcf; font-weight: bold;">AS</span> total
<span style="color: #729fcf; font-weight: bold;">FROM</span>        contacts
<span style="color: #729fcf; font-weight: bold;">GROUP</span> <span style="color: #729fcf; font-weight: bold;">BY</span>    first_name, last_name
<span style="color: #729fcf; font-weight: bold;">HAVING</span>      total &gt; 1
<span style="color: #729fcf; font-weight: bold;">ORDER</span> <span style="color: #729fcf; font-weight: bold;">BY</span>    last_name, first_name;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-7" class="outline-4">
<h4 id="sec-12-3-7">Agrupar</h4>
<div class="outline-text-4" id="text-12-3-7">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      <span style="color: #729fcf; font-weight: bold;">name</span>,
            (
            <span style="color: #729fcf; font-weight: bold;">SELECT</span>  <span style="color: #729fcf; font-weight: bold;">CASE</span>
            <span style="color: #729fcf; font-weight: bold;">WHEN</span>    <span style="color: #729fcf;">EXTRACT</span>(<span style="color: #729fcf; font-weight: bold;">HOUR</span> <span style="color: #729fcf; font-weight: bold;">FROM</span> date_start) &lt; 12
            <span style="color: #729fcf; font-weight: bold;">THEN</span>    <span style="color: #ad7fa8; font-style: italic;">'ma&#241;ana'</span>
            <span style="color: #729fcf; font-weight: bold;">ELSE</span>    <span style="color: #ad7fa8; font-style: italic;">'tarde'</span>
            <span style="color: #729fcf; font-weight: bold;">END</span>
            ) <span style="color: #729fcf; font-weight: bold;">AS</span> turno,
            <span style="color: #729fcf;">COUNT</span>(id) <span style="color: #729fcf; font-weight: bold;">as</span> total
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls
<span style="color: #729fcf; font-weight: bold;">GROUP</span> <span style="color: #729fcf; font-weight: bold;">BY</span>    <span style="color: #729fcf; font-weight: bold;">name</span>, turno
<span style="color: #729fcf; font-weight: bold;">HAVING</span>      total &gt; 500
<span style="color: #729fcf; font-weight: bold;">ORDER</span> <span style="color: #729fcf; font-weight: bold;">BY</span>    total <span style="color: #729fcf; font-weight: bold;">DESC</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-8" class="outline-4">
<h4 id="sec-12-3-8">Cruzando tablas</h4>
<div class="outline-text-4" id="text-12-3-8">
<p>
Explicito mejor que implicito
</p>

<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      <span style="color: #729fcf;">COUNT</span>(cc.id) <span style="color: #729fcf; font-weight: bold;">AS</span> total
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls_contacts cc
<span style="color: #729fcf; font-weight: bold;">LEFT</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>   contacts co <span style="color: #729fcf; font-weight: bold;">ON</span> co.id = cc.contact_id ;
<span style="color: #729fcf; font-weight: bold;">AND</span>         cc.deleted = 0
<span style="color: #729fcf; font-weight: bold;">AND</span>         co.deleted = 0

<span style="color: #729fcf; font-weight: bold;">SELECT</span>      <span style="color: #729fcf;">COUNT</span>(cc.id) <span style="color: #729fcf; font-weight: bold;">AS</span> total
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls_contacts cc, contacts co
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       co.deleted = 0
<span style="color: #729fcf; font-weight: bold;">AND</span>         co.id = cc.contact_id
<span style="color: #729fcf; font-weight: bold;">AND</span>         cc.deleted = 0
</pre>
</div>

<p>
Contactos con llamadas
</p>

<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      <span style="color: #729fcf;">COUNT</span>(cc.id) <span style="color: #729fcf; font-weight: bold;">AS</span> total
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls_contacts cc
<span style="color: #729fcf; font-weight: bold;">LEFT</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>   contacts co <span style="color: #729fcf; font-weight: bold;">ON</span> co.id = cc.contact_id;
</pre>
</div>

<p>
Contactos con llamadas entrantes
</p>

<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span>      co.last_name,
            co.first_name,
            CONVERT_TZ(date_start, <span style="color: #ad7fa8; font-style: italic;">'+00:00'</span>, <span style="color: #ad7fa8; font-style: italic;">'-03:00'</span>) <span style="color: #729fcf; font-weight: bold;">as</span> fecha
<span style="color: #729fcf; font-weight: bold;">FROM</span>        contacts co
<span style="color: #729fcf; font-weight: bold;">INNER</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>  calls_contacts cc <span style="color: #729fcf; font-weight: bold;">ON</span> (cc.contact_id = co.id <span style="color: #729fcf; font-weight: bold;">AND</span> cc.deleted = 0)
<span style="color: #729fcf; font-weight: bold;">INNER</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>  calls ca <span style="color: #729fcf; font-weight: bold;">ON</span> (ca.id = cc.call_id <span style="color: #729fcf; font-weight: bold;">AND</span> ca.deleted = 0)
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       co.deleted = 0
<span style="color: #729fcf; font-weight: bold;">AND</span>         last_name <span style="color: #729fcf; font-weight: bold;">IS</span> <span style="color: #729fcf; font-weight: bold;">NOT</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>
<span style="color: #729fcf; font-weight: bold;">LIMIT</span>       20;
</pre>
</div>

<p>
Actualizar las llamadas de un contacto
</p>

<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">UPDATE</span>      calls ca, contacts co, calls_contacts cc
<span style="color: #729fcf; font-weight: bold;">SET</span>         ca.assigned_user_id = (
                                    <span style="color: #729fcf; font-weight: bold;">SELECT</span>  id
                                    <span style="color: #729fcf; font-weight: bold;">FROM</span>    users
                                    <span style="color: #729fcf; font-weight: bold;">WHERE</span>   user_name = <span style="color: #ad7fa8; font-style: italic;">'osiris'</span>
                                    )
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       ca.id = cc.call_id
<span style="color: #729fcf; font-weight: bold;">AND</span>         co.id = cc.contact_id
<span style="color: #729fcf; font-weight: bold;">AND</span>         co.id = <span style="color: #ad7fa8; font-style: italic;">'2a756d50-ae20-0754-a7c7-49beb64cee37'</span>;


<span style="color: #729fcf; font-weight: bold;">UPDATE</span>      calls ca
<span style="color: #729fcf; font-weight: bold;">INNER</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>  calls_contacts cc <span style="color: #729fcf; font-weight: bold;">ON</span> cc.call_id = ca.id
<span style="color: #729fcf; font-weight: bold;">INNER</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>  contacts co <span style="color: #729fcf; font-weight: bold;">ON</span> co.id = cc.contact_id
<span style="color: #729fcf; font-weight: bold;">SET</span>         ca.assigned_user_id = (
                                    <span style="color: #729fcf; font-weight: bold;">SELECT</span>  id
                                    <span style="color: #729fcf; font-weight: bold;">FROM</span>    users
                                    <span style="color: #729fcf; font-weight: bold;">WHERE</span>   user_name = <span style="color: #ad7fa8; font-style: italic;">'osiris'</span>
                                    )
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       co. = <span style="color: #ad7fa8; font-style: italic;">'2a756d50-ae20-0754-a7c7-49beb64cee37'</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-9" class="outline-4">
<h4 id="sec-12-3-9">Insertar desde otra tabla</h4>
<div class="outline-text-4" id="text-12-3-9">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">DROP</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">IF</span> <span style="color: #729fcf; font-weight: bold;">EXISTS</span> calls_contacts_today;

<span style="color: #729fcf; font-weight: bold;">CREATE</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> `calls_contacts_today` (
    `id` <span style="color: #8ae234; font-weight: bold;">varchar</span>(36) <span style="color: #729fcf; font-weight: bold;">NOT</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>,
    `contact_id` <span style="color: #8ae234; font-weight: bold;">varchar</span>(36) <span style="color: #729fcf; font-weight: bold;">NOT</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>,
    `call_id` <span style="color: #8ae234; font-weight: bold;">varchar</span>(36) <span style="color: #729fcf; font-weight: bold;">NOT</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>,
    `status` <span style="color: #8ae234; font-weight: bold;">varchar</span>(25) <span style="color: #729fcf; font-weight: bold;">default</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>,
    `direction` <span style="color: #8ae234; font-weight: bold;">varchar</span>(25) <span style="color: #729fcf; font-weight: bold;">default</span> <span style="color: #729fcf; font-weight: bold;">NULL</span>,
     <span style="color: #729fcf; font-weight: bold;">PRIMARY</span> <span style="color: #729fcf; font-weight: bold;">KEY</span>  (`call_id`)
);

<span style="color: #729fcf; font-weight: bold;">INSERT</span> <span style="color: #729fcf; font-weight: bold;">INTO</span> calls_contacts_today
            (id, contact_id, call_id, status, direction)
<span style="color: #729fcf; font-weight: bold;">SELECT</span>      UUID(), cc.contact_id, ca.id, ca.status, ca.direction
<span style="color: #729fcf; font-weight: bold;">FROM</span>        calls ca
<span style="color: #729fcf; font-weight: bold;">INNER</span> <span style="color: #729fcf; font-weight: bold;">JOIN</span>  calls_contacts cc <span style="color: #729fcf; font-weight: bold;">ON</span> cc.call_id = ca.id
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       <span style="color: #8ae234; font-weight: bold;">DATE</span>(ca.date_start) = CURDATE();
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-10" class="outline-4">
<h4 id="sec-12-3-10">AUTOCOMPLETE</h4>
<div class="outline-text-4" id="text-12-3-10">
<div class="org-src-container">

<pre class="src src-sql">\#

<span style="color: #729fcf; font-weight: bold;">SELECT</span> <span style="color: #729fcf; font-weight: bold;">FROM</span> t&lt;Presionar TAB&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-11" class="outline-4">
<h4 id="sec-12-3-11">COUNT</h4>
<div class="outline-text-4" id="text-12-3-11">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">UPDATE</span> calls <span style="color: #729fcf; font-weight: bold;">set</span> deleted = 1 <span style="color: #729fcf; font-weight: bold;">WHERE</span> status = <span style="color: #ad7fa8; font-style: italic;">'Not Held'</span>;
<span style="color: #729fcf; font-weight: bold;">SELECT</span> <span style="color: #729fcf;">COUNT</span>(*) <span style="color: #729fcf; font-weight: bold;">FROM</span> calls;
<span style="color: #729fcf; font-weight: bold;">SELECT</span> <span style="color: #729fcf;">COUNT</span>(id) <span style="color: #729fcf; font-weight: bold;">FROM</span> calls;
<span style="color: #729fcf; font-weight: bold;">SELECT</span> <span style="color: #729fcf;">COUNT</span>(id) <span style="color: #729fcf; font-weight: bold;">FROM</span> calls <span style="color: #729fcf; font-weight: bold;">WHERE</span> deleted = 0;
<span style="color: #729fcf; font-weight: bold;">SELECT</span> SQL_CALC_FOUND_ROWS id <span style="color: #729fcf; font-weight: bold;">FROM</span> calls <span style="color: #729fcf; font-weight: bold;">WHERE</span> deleted = 0 <span style="color: #729fcf; font-weight: bold;">LIMIT</span> 1; <span style="color: #729fcf; font-weight: bold;">SELECT</span> FOUND_ROWS();
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-12" class="outline-4">
<h4 id="sec-12-3-12">EXPLAIN</h4>
<div class="outline-text-4" id="text-12-3-12">
<div class="org-src-container">

<pre class="src src-sql">EXPLAIN <span style="color: #729fcf; font-weight: bold;">SELECT</span>      <span style="color: #729fcf;">COUNT</span>(id)
        <span style="color: #729fcf; font-weight: bold;">FROM</span>        calls
        <span style="color: #729fcf; font-weight: bold;">WHERE</span>       deleted = 0
        <span style="color: #729fcf; font-weight: bold;">AND</span>         assigned_user_id = <span style="color: #ad7fa8; font-style: italic;">'ba8630eb-7442-73f9-a88e-49b6be5882c2'</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-13" class="outline-4">
<h4 id="sec-12-3-13">INDEX</h4>
<div class="outline-text-4" id="text-12-3-13">
<div class="org-src-container">

<pre class="src src-sql">SHOW INDEX <span style="color: #729fcf; font-weight: bold;">IN</span> calls;
<span style="color: #729fcf; font-weight: bold;">ALTER</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">calls</span> <span style="color: #729fcf; font-weight: bold;">ADD</span> INDEX idx_deleted_user (deleted, assigned_user_id);
<span style="color: #729fcf; font-weight: bold;">ALTER</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">calls</span> <span style="color: #729fcf; font-weight: bold;">DROP</span> INDEX idx_deleted_user;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-14" class="outline-4">
<h4 id="sec-12-3-14">UNIQUE</h4>
<div class="outline-text-4" id="text-12-3-14">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">ALTER</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">calls_contacts_today</span> <span style="color: #729fcf; font-weight: bold;">ADD</span> <span style="color: #729fcf; font-weight: bold;">UNIQUE</span> idx_contact_call (contact_id, call_id);
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-15" class="outline-4">
<h4 id="sec-12-3-15">AUTO_INCREMENT</h4>
<div class="outline-text-4" id="text-12-3-15">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">ALTER</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">tracker</span> AUTO_INCREMENT = 9;
<span style="color: #729fcf; font-weight: bold;">ALTER</span> <span style="color: #729fcf; font-weight: bold;">TABLE</span> <span style="color: #edd400; font-weight: bold;">tracker</span> <span style="color: #729fcf; font-weight: bold;">MODIFY</span> id <span style="color: #8ae234; font-weight: bold;">INT</span>(11) AUTO_INCREMENT;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-16" class="outline-4">
<h4 id="sec-12-3-16">REGEXP</h4>
<div class="outline-text-4" id="text-12-3-16">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">UPDATE</span>      contacts
<span style="color: #729fcf; font-weight: bold;">SET</span>         postal = SUBSTR(postal,4,7)
<span style="color: #729fcf; font-weight: bold;">WHERE</span>       postal <span style="color: #729fcf; font-weight: bold;">NOT</span> REGEXP <span style="color: #ad7fa8; font-style: italic;">'^[0-9]{4}$'</span>
<span style="color: #729fcf; font-weight: bold;">AND</span>         postal REGEXP <span style="color: #ad7fa8; font-style: italic;">'^[A-Z]{3}[0-9]{4}$'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-17" class="outline-4">
<h4 id="sec-12-3-17">RANDOM</h4>
<div class="outline-text-4" id="text-12-3-17">
<div class="org-src-container">

<pre class="src src-sql"><span style="color: #729fcf; font-weight: bold;">SELECT</span> RAND();
<span style="color: #729fcf; font-weight: bold;">SELECT</span> MD5(RAND());
<span style="color: #729fcf; font-weight: bold;">SELECT</span> <span style="color: #729fcf;">SUBSTRING</span>(MD5(RAND()) <span style="color: #729fcf; font-weight: bold;">FROM</span> 1 <span style="color: #729fcf; font-weight: bold;">FOR</span> 8);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4">Postfix</h3>
<div class="outline-text-3" id="text-12-4">
<p>
<code>TODO</code>
</p>
</div>
</div>

<div id="outline-container-sec-12-5" class="outline-3">
<h3 id="sec-12-5">DHCP</h3>
<div class="outline-text-3" id="text-12-5">
</div><div id="outline-container-sec-12-5-1" class="outline-4">
<h4 id="sec-12-5-1"><code>dhcp3</code></h4>
<div class="outline-text-4" id="text-12-5-1">
</div><div id="outline-container-sec-12-5-1-1" class="outline-5">
<h5 id="sec-12-5-1-1">configuración</h5>
<div class="outline-text-5" id="text-12-5-1-1">
<p>
Es muy simple la sintaxis del archivo <code>/etc/dhcp3/dhcpd.conf</code> donde podemos
especificar los sevidores de dns (<b>domain-name-servers</b>) entre
otros parámetros, lo importante es definir la subred, en el caso
de tratarse de una LAN es muy común la siguiente configuración:
</p>

<pre class="example">
dns-update-style none;
option domain-name-servers 200.45.191.35,200.45.48.233;
default-lease-time 6000;
max-lease-time 7200;
log-facility local7;

subnet 192.168.0.0 netmask 255.255.255.0 {
  range 192.168.0.100 192.168.0.150;
  option routers 192.168.0.1;
}
</pre>

<ul class="org-ul">
<li>Se trata de una red <code>/24</code>, es decir que los primeros tres
octetos están fijos, tal como indica la máscara de red
<code>255.255.255.0</code>.
</li>
<li>Se entregarán IPs dinámicamente desde la <code>192.168.0.100</code> a la
<code>192.168.0.150</code>, siendo <code>192.168.0.1</code> la IP del <code>gateway</code>.
</li>
</ul>

<p>
En el mismo archivo se pueden asignar IPs fijas, ingresando la
dirección física (<b>MAC Address</b>) y la IP elegida:
</p>

<pre class="example">
host syrah {
        hardware ethernet 00:AC:DC:00:CA:FE;
        fixed-address 192.168.0.4;
}
</pre>
</div>
</div>

<div id="outline-container-sec-12-5-1-2" class="outline-5">
<h5 id="sec-12-5-1-2">iniciar y detener el servicio</h5>
<div class="outline-text-5" id="text-12-5-1-2">
<pre class="example">
/etc/init.d/dhcp start
/etc/init.d/dhcp stop
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Metodologías ágiles de trabajo</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1">Time Management for System Administrators</h3>
<div class="outline-text-3" id="text-13-1">
<ul class="org-ul">
<li><a href="http://www.tomontime.com/">http://www.tomontime.com/</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2">GTD</h3>
<div class="outline-text-3" id="text-13-2">
<p>
Es un método de gestión de las actividades y el título de un libro
de David Allen <sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>, libro que en español se ha editado con
el título <b>Organízate con eficacia</b> <sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>.
</p>

<p>
<b>GTD</b> se basa en el principio de que una persona necesita borrar de
su mente todas las tareas que tiene pendientes guardándolas en un
lugar específico. De este modo, se libera a la mente del trabajo de
recordar todo lo que hay que hacer, y se puede concentrar en la
efectiva realización de aquellas tareas.
</p>

<p>
A diferencia de otros expertos en gestión del tiempo, <b>Allen</b> no se
centra en el establecimiento de prioridades. En su lugar, él insta a
la creación de listas de tareas específicas para cada contexto, por
ejemplo, una lista de llamadas telefónicas pendientes o recados que
hacer en la ciudad. También sugiere que cualquier nueva tarea que
pueda ser completada en menos de dos minutos debería ser hecha
inmediatamente.
</p>
</div>

<div id="outline-container-sec-13-2-1" class="outline-4">
<h4 id="sec-13-2-1">Workflow</h4>
<div class="outline-text-4" id="text-13-2-1">

<div class="figure">
<p><img src="img/gtd-workflow.png" alt="GTD Workflow" width="640" height="480" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-13-2-2" class="outline-4">
<h4 id="sec-13-2-2">Recopilar</h4>
<div class="outline-text-4" id="text-13-2-2">
<ul class="org-ul">
<li>Capturar todo en <b><b>INBOX</b></b> y seguir trabajando
<ul class="org-ul">
<li>Ideas
</li>
<li>Tareas
</li>
<li>Recordatorios
</li>
<li>Cosas por hacer en general
</li>
</ul>
</li>
<li>Utilizar una herramienta de captura ágil
</li>
<li>Capturar&#x2026; y olvidarse de momento
</li>
<li>Aplicar <b>regla de los 2 minutos</b>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-13-2-3" class="outline-4">
<h4 id="sec-13-2-3">Procesar</h4>
<div class="outline-text-4" id="text-13-2-3">
<ul class="org-ul">
<li>Procesar por completo el <b>INBOX</b>
<ul class="org-ul">
<li>Si requiere actuar
</li>
<li>Delegar a alguien
<ul class="org-ul">
<li>Asignar a carpeta (sólo si depende de mi)
</li>
</ul>
</li>
<li>No requiere actuar
<ul class="org-ul">
<li>Eliminar
</li>
<li>Archivar
</li>
</ul>
</li>
</ul>
</li>
<li>Procesar de manera ágil, tomar decisiones rápidas
</li>
<li>Aislarse de las distracciones
</li>
<li>Aplicar <b>regla de los 2 minutos</b>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-13-2-4" class="outline-4">
<h4 id="sec-13-2-4">Organizar</h4>
<div class="outline-text-4" id="text-13-2-4">
<ul class="org-ul">
<li>Asignar acciones a una carpeta
<ul class="org-ul">
<li><b>PRÓXIMO</b>, a realizar en un lapso de tiempo corto
</li>
<li><b>PROYECTO</b>, cosas a realizar dentro de un proyecto
</li>
<li><b>EN ESPERA</b>, depende de otra persona
</li>
<li><b>ALGÚN DÍA</b>, no tiene prioridad temporal
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-13-2-5" class="outline-4">
<h4 id="sec-13-2-5">Revisar</h4>
<div class="outline-text-4" id="text-13-2-5">
<ul class="org-ul">
<li>Fijar un momento para la revisión
</li>
<li>Revisión ágil y diligente
</li>
<li>Localizar y cuidar las tareas clave
</li>
<li>Las acciones cambian de carpeta
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-13-3" class="outline-3">
<h3 id="sec-13-3">Scrum</h3>
<div class="outline-text-3" id="text-13-3">
<p>
<code>TODO</code>
</p>
</div>
</div>

<div id="outline-container-sec-13-4" class="outline-3">
<h3 id="sec-13-4">Pomodoro</h3>
<div class="outline-text-3" id="text-13-4">
<p>
<code>TODO</code>
</p>
</div>
</div>

<div id="outline-container-sec-13-5" class="outline-3">
<h3 id="sec-13-5">Autofocus</h3>
<div class="outline-text-3" id="text-13-5">
<p>
<code>TODO</code>
</p>
</div>
</div>

<div id="outline-container-sec-13-6" class="outline-3">
<h3 id="sec-13-6">Kanban</h3>
<div class="outline-text-3" id="text-13-6">
<p>
<code>TODO</code>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">Aplicaciones de Consola</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1">chat</h3>
<div class="outline-text-3" id="text-14-1">
<ul class="org-ul">
<li>irssi
</li>
<li>centerim
</li>
<li>finch
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2">copias</h3>
<div class="outline-text-3" id="text-14-2">
<ul class="org-ul">
<li>rdiffbackup
</li>
<li>rsync
</li>
<li>scp
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-3" class="outline-3">
<h3 id="sec-14-3">correo</h3>
<div class="outline-text-3" id="text-14-3">
<ul class="org-ul">
<li>alpine
</li>
<li>mutt
</li>
<li>sup
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-4" class="outline-3">
<h3 id="sec-14-4">descargas</h3>
<div class="outline-text-3" id="text-14-4">
<ul class="org-ul">
<li>axel
</li>
<li>rtorrent
</li>
<li>wget
</li>
<li>ncftp
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-5" class="outline-3">
<h3 id="sec-14-5">disco</h3>
<div class="outline-text-3" id="text-14-5">
<ul class="org-ul">
<li>ncdu
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-6" class="outline-3">
<h3 id="sec-14-6">editores</h3>
<div class="outline-text-3" id="text-14-6">
<ul class="org-ul">
<li>emacs
</li>
<li>vim
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-7" class="outline-3">
<h3 id="sec-14-7">explorador de archivos</h3>
<div class="outline-text-3" id="text-14-7">
<ul class="org-ul">
<li>mc
</li>
<li>ranger
</li>
<li>vifm
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-8" class="outline-3">
<h3 id="sec-14-8">monitoreo</h3>
<div class="outline-text-3" id="text-14-8">
</div><div id="outline-container-sec-14-8-1" class="outline-4">
<h4 id="sec-14-8-1"><code>top</code></h4>
</div>
<div id="outline-container-sec-14-8-2" class="outline-4">
<h4 id="sec-14-8-2"><code>atop</code></h4>
<div class="outline-text-4" id="text-14-8-2">
<p>
Es posible consultar el registro de un día en particular, por
ejemplo qué procesos estaban consumiendo mayor acceso a disco el
24/01/2014 en el servidor tempranillo entre las 10 y 12hs:
</p>

<div class="org-src-container">

<pre class="src src-sh">ssh tempranillo atop -r /var/log/atop/atop_20140121 -b 10:00 -e 12:00 -D | head -30
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14-8-3" class="outline-4">
<h4 id="sec-14-8-3"><code>htop</code></h4>
</div>
<div id="outline-container-sec-14-8-4" class="outline-4">
<h4 id="sec-14-8-4"><code>iftop</code></h4>
</div>
<div id="outline-container-sec-14-8-5" class="outline-4">
<h4 id="sec-14-8-5"><code>iotop</code></h4>
<div class="outline-text-4" id="text-14-8-5">
<div class="org-src-container">

<pre class="src src-sh">ssh malbec <span style="color: #ad7fa8; font-style: italic;">'sudo iotop -b -o -n 2 -d 5'</span>
</pre>
</div>

<pre class="example">
Total DISK READ: 0.00 B/s | Total DISK WRITE: 0.00 B/s
  TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN      IO    COMMAND
Total DISK READ: 0.00 B/s | Total DISK WRITE: 0.00 B/s
  TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN      IO    COMMAND
</pre>
</div>
</div>

<div id="outline-container-sec-14-8-6" class="outline-4">
<h4 id="sec-14-8-6"><code>ioping</code></h4>
<div class="outline-text-4" id="text-14-8-6">
<div class="org-src-container">

<pre class="src src-sh">ioping -c 5 /mnt/data
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14-8-7" class="outline-4">
<h4 id="sec-14-8-7">mon</h4>
</div>
<div id="outline-container-sec-14-8-8" class="outline-4">
<h4 id="sec-14-8-8">monit</h4>
</div>
<div id="outline-container-sec-14-8-9" class="outline-4">
<h4 id="sec-14-8-9">munin</h4>
</div>
<div id="outline-container-sec-14-8-10" class="outline-4">
<h4 id="sec-14-8-10"><code>mtr</code></h4>
<div class="outline-text-4" id="text-14-8-10">
<div class="org-src-container">

<pre class="src src-sh">mtr -r -c 5 -n osiux.com
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14-8-11" class="outline-4">
<h4 id="sec-14-8-11">sysstat</h4>
</div>
<div id="outline-container-sec-14-8-12" class="outline-4">
<h4 id="sec-14-8-12"><code>vnstat</code></h4>
<div class="outline-text-4" id="text-14-8-12">
</div><div id="outline-container-sec-14-8-12-1" class="outline-5">
<h5 id="sec-14-8-12-1">top 10</h5>
<div class="outline-text-5" id="text-14-8-12-1">
<div class="org-src-container">

<pre class="src src-sh">ssh vodka <span style="color: #ad7fa8; font-style: italic;">'vnstat -i venet0 -t'</span>
</pre>
</div>

<pre class="example">
venet0  /  top 10

   #      day          rx      |     tx      |    total    |   avg. rate
  -----------------------------+-------------+-------------+---------------
   1   03/19/13       4.09 GiB |   64.21 GiB |   68.30 GiB |    6.63 Mbit/s
   2   03/20/13     930.99 MiB |   23.57 GiB |   24.48 GiB |    2.38 Mbit/s
   3   11/09/13       3.58 GiB |   18.64 GiB |   22.23 GiB |    2.16 Mbit/s
   4   03/26/13       1.02 GiB |   18.19 GiB |   19.22 GiB |    1.87 Mbit/s
   5   03/25/13     735.60 MiB |   16.55 GiB |   17.27 GiB |    1.68 Mbit/s
   6   03/27/13     695.73 MiB |   13.61 GiB |   14.29 GiB |    1.39 Mbit/s
   7   03/21/13     700.46 MiB |   13.58 GiB |   14.26 GiB |    1.38 Mbit/s
   8   04/09/13     648.98 MiB |   13.32 GiB |   13.95 GiB |    1.35 Mbit/s
   9   01/07/14      13.21 GiB |  356.93 MiB |   13.56 GiB |    1.32 Mbit/s
  10   07/03/13     830.55 MiB |   12.69 GiB |   13.50 GiB |    1.31 Mbit/s
  -----------------------------+-------------+-------------+---------------
</pre>
</div>
</div>

<div id="outline-container-sec-14-8-12-2" class="outline-5">
<h5 id="sec-14-8-12-2">vista mensual</h5>
<div class="outline-text-5" id="text-14-8-12-2">
<div class="org-src-container">

<pre class="src src-sh">ssh vodka <span style="color: #ad7fa8; font-style: italic;">'vnstat -i venet0 -m'</span>
</pre>
</div>

<pre class="example">
venet0  /  monthly

      month        rx      |     tx      |    total    |   avg. rate
   ------------------------+-------------+-------------+---------------
     Sep '13     15.25 GiB |    8.18 GiB |   23.43 GiB |   75.84 kbit/s
     Oct '13     26.23 GiB |   25.19 GiB |   51.42 GiB |  161.03 kbit/s
     Nov '13     10.20 GiB |   30.08 GiB |   40.28 GiB |  130.36 kbit/s
     Dec '13      1.67 GiB |    9.41 GiB |   11.08 GiB |   34.69 kbit/s
     Jan '14     25.88 GiB |    7.73 GiB |   33.61 GiB |  105.25 kbit/s
     Feb '14     10.74 GiB |   12.64 GiB |   23.38 GiB |   81.06 kbit/s
     Mar '14      1.95 GiB |    7.60 GiB |    9.54 GiB |   29.89 kbit/s
     Apr '14      6.25 GiB |   19.92 GiB |   26.17 GiB |   84.69 kbit/s
     May '14      5.60 GiB |   11.23 GiB |   16.83 GiB |   52.71 kbit/s
     Jun '14      6.62 GiB |   13.09 GiB |   19.71 GiB |   63.79 kbit/s
     Jul '14      6.98 GiB |   11.74 GiB |   18.72 GiB |   58.63 kbit/s
     Aug '14      2.84 GiB |    4.32 GiB |    7.16 GiB |   58.99 kbit/s
   ------------------------+-------------+-------------+---------------
   estimated      7.48 GiB |   11.35 GiB |   18.83 GiB |
</pre>
</div>
</div>

<div id="outline-container-sec-14-8-12-3" class="outline-5">
<h5 id="sec-14-8-12-3">vista semanal</h5>
<div class="outline-text-5" id="text-14-8-12-3">
<div class="org-src-container">

<pre class="src src-sh">ssh vodka <span style="color: #ad7fa8; font-style: italic;">'vnstat -i venet0 -w'</span>
</pre>
</div>

<pre class="example">
venet0  /  weekly

                     rx      |     tx      |    total    |   avg. rate
  ---------------------------+-------------+-------------+---------------
   last 7 days      1.63 GiB |    2.51 GiB |    4.15 GiB |   59.34 kbit/s
     last week      1.84 GiB |    2.79 GiB |    4.63 GiB |   64.21 kbit/s
  current week    475.44 MiB |  818.54 MiB |    1.26 GiB |   68.63 kbit/s
  ---------------------------+-------------+-------------+---------------
     estimated      1.86 GiB |    3.20 GiB |    5.05 GiB |
</pre>
</div>
</div>

<div id="outline-container-sec-14-8-12-4" class="outline-5">
<h5 id="sec-14-8-12-4">vista por horas</h5>
<div class="outline-text-5" id="text-14-8-12-4">
<div class="org-src-container">

<pre class="src src-sh">ssh vodka <span style="color: #ad7fa8; font-style: italic;">'vnstat -i venet0 -h'</span>
</pre>
</div>

<pre class="example">
 venet0                                                                   18:54 
  ^                              t                                              
  |                              t                                              
  |      t                    t  t  t        t           t                      
  |   t  t  t                 t  t  t        t           t  t                   
  |   t  t  t        t        t  t  t  t     t     t     t  t              t    
  |   t  t  t        t rt     t  t  t  t  t rt  t  t     t  t        t     t    
  |   t  t  t rt  t  t rt  t rt  t  t  t  t rt  t rt  t  t  t rt rt  t     t    
  |  rt rt rt rt  t  t rt  t rt  t  t  t rt rt  t rt  t  t  t rt rt  t  t  t    
  |  rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt    
  |  rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt rt    
 -+---------------------------------------------------------------------------&gt; 
  |  19 20 21 22 23 00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18    

 h  rx (KiB)   tx (KiB)      h  rx (KiB)   tx (KiB)      h  rx (KiB)   tx (KiB) 
19      12081      23225    03      15343      27274    11       8649      12919
20      10756      26823    04       8948      32158    12       8925      27707
21      11081      25601    05       8132      28619    13       7015      24674
22      14818      14650    06       8555      20157    14      15292      14147
23       7959      15933    07       9931      19151    15      14354      15614
00       8097      20110    08      18870      26866    16       7999      18811
01      16560      18226    09       8574      16603    17       7759      11644
02       8085      13586    10      16026      19806    18       8349      19516
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14-8-13" class="outline-4">
<h4 id="sec-14-8-13">multitail</h4>
</div>
<div id="outline-container-sec-14-8-14" class="outline-4">
<h4 id="sec-14-8-14">logcheck</h4>
</div>
</div>
<div id="outline-container-sec-14-9" class="outline-3">
<h3 id="sec-14-9">musica</h3>
<div class="outline-text-3" id="text-14-9">
<ul class="org-ul">
<li>moc
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-10" class="outline-3">
<h3 id="sec-14-10">navegadores web</h3>
<div class="outline-text-3" id="text-14-10">
<ul class="org-ul">
<li>elinks
</li>
<li>links
</li>
<li>lynx
</li>
<li>w3m
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-11" class="outline-3">
<h3 id="sec-14-11">red</h3>
<div class="outline-text-3" id="text-14-11">
<ul class="org-ul">
<li>wicd-curses
</li>
<li>tshark
</li>
<li>tcpdump
</li>
<li>netcat
</li>
<li>nmap
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-12" class="outline-3">
<h3 id="sec-14-12">rss</h3>
<div class="outline-text-3" id="text-14-12">
<ul class="org-ul">
<li>newsbeuter
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-13" class="outline-3">
<h3 id="sec-14-13">seguridad</h3>
<div class="outline-text-3" id="text-14-13">
<ul class="org-ul">
<li>chrootkit
</li>
<li>cron-apt
</li>
<li>fail2ban
</li>
<li>rkhunter
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-14" class="outline-3">
<h3 id="sec-14-14">utilitarios</h3>
<div class="outline-text-3" id="text-14-14">
<ul class="org-ul">
<li>screen
</li>
<li>tmux
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-15" class="outline-3">
<h3 id="sec-14-15">versionado</h3>
<div class="outline-text-3" id="text-14-15">
<ul class="org-ul">
<li>etckeeper
</li>
<li>git-core
</li>
<li>mercurial
</li>
<li>subversion
</li>
<li>tig
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-16" class="outline-3">
<h3 id="sec-14-16">ssh</h3>
<div class="outline-text-3" id="text-14-16">
</div><div id="outline-container-sec-14-16-1" class="outline-4">
<h4 id="sec-14-16-1"><code>parallel-ssh</code></h4>
<div class="outline-text-4" id="text-14-16-1">
<p>
Armamos un listado con los <b>hostnames</b> de cada servidor y lo
guardarmos en un archivo, por ejemplo en <code>~/.ssh/gcoop</code>, ahora solo
falta indicar el comando a ejecutar <code>uptime</code> en este caso y listo!
</p>

<div class="org-src-container">

<pre class="src src-sh">parallel-ssh -i -h ~/.ssh/gcoop uptime | tee
</pre>
</div>

<pre class="example">
[1] 18:43:47 [FAILURE] squeeze Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
Permission denied (publickey).
[2] 18:43:47 [SUCCESS] tempranillo
 18:43:37 up 121 days, 15:55,  0 users,  load average: 0,36, 0,26, 0,21
[3] 18:43:47 [SUCCESS] malbec
 18:43:39 up 59 days, 16:32,  0 users,  load average: 0.00, 0.00, 0.00
[4] 18:43:47 [FAILURE] ssug0003lx Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
Permission denied (publickey).
[5] 18:43:47 [FAILURE] redmine Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
pssh error: SSH requested a password. Please create SSH keys or use
the -A option to provide a password.
Permission denied (publickey,password).
[6] 18:43:47 [FAILURE] symfony Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
pssh error: SSH requested a password. Please create SSH keys or use
the -A option to provide a password.
Permission denied (publickey,password).
[7] 18:43:47 [FAILURE] torrontes Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
pssh error: SSH requested a password. Please create SSH keys or use
the -A option to provide a password.
Permission denied (publickey,password).
[8] 18:43:47 [FAILURE] mysqlcentos Exited with error code 255
Stderr: Enter passphrase for key '/home/osiris/.ssh/id_rsa': 
pssh error: SSH requested a password. Please create SSH keys or use
the -A option to provide a password.
Permission denied (publickey,gssapi-with-mic,password).
[9] 18:44:46 [FAILURE] merlot Timed out, Killed by signal 9
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Nota al pie de p&aacute;gina: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://davidco.com">http://davidco.com</a>
</p></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
<a href="http://www.cuspide.com/isbn/849662708X">http://www.cuspide.com/isbn/849662708X</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Osiris Alejandro Gómez (<a href="mailto:osiris@gcoop.coop">osiris@gcoop.coop</a>)</p>
<p class="date">Date: 2014-01-20</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 23.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.6)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
